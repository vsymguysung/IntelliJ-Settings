<application>
  <component name="VimEditorSettings">
    <editor />
  </component>
  <component name="VimHistorySettings">
    <history>
      <history-search>
        <entry encoding="base64">XDxoYW5kbGVJbnRlbnRSZXNwb25zZVw+</entry>
        <entry encoding="base64">XDxnX3Byb2Nlc3Nvclw+</entry>
        <entry encoding="base64">XDxnX2RpYWxvZ1w+</entry>
        <entry encoding="base64">XDxjb25maWd1cmVVc2VyTWVkaWFDYWxsYmFja1w+</entry>
        <entry encoding="base64">XDxlcnJvck1lc3NhZ2VcPg==</entry>
        <entry encoding="base64">XDxnX2F1ZGlvX3N0cmVhbV9zb3VyY2VcPg==</entry>
        <entry encoding="base64">XDxnX3NjcmlwdFByb2Nlc3Nvclw+</entry>
        <entry encoding="base64">XDxnX2F1ZGlvU3RyZWFtU291cmNlXD4=</entry>
        <entry encoding="base64">XDxnX2F1ZGlvQ29udGV4dFw+</entry>
        <entry encoding="base64">XDxnX3JlU2FtcGxlclw+</entry>
        <entry encoding="base64">XDxzdXBwb3J0c0dldFVzZXJNZWRpYVw+</entry>
        <entry encoding="base64">XDxBdWRpb0NvbnRleHRDbGFzc1w+</entry>
        <entry encoding="base64">XDxnX3N1cHBvcnRzQXVkaW9Db250ZXh0XD4=</entry>
        <entry encoding="base64">XDxtZWRpYVN0cmVhbVNvdXJjZVw+</entry>
        <entry encoding="base64">XDxzdGFydFNlc3Npb25cPg==</entry>
        <entry encoding="base64">XDxpbml0aWFsaXplQXVkaW9TdHJlYW1cPg==</entry>
        <entry encoding="base64">XDxnX3N1cHBvcnRzR2V0VXNlck1lZGlhXD4=</entry>
        <entry encoding="base64">XDxCT1RfVkVSU0lPTl9RVUVSWV9QQVJBTVw+</entry>
        <entry encoding="base64">XDxKV1RfUVVFUllfUEFSQU1cPg==</entry>
        <entry encoding="base64">XDxjb25zdFw+</entry>
      </history-search>
      <history-cmd>
        <entry>53,64 %s/&quot;/'/gc</entry>
        <entry>23,34%s/&quot;/'/gc</entry>
        <entry>29,32%s/&quot;/'/gc</entry>
        <entry>28,54%s/&quot;/'/gc</entry>
        <entry>28,55s/&quot;/'/c</entry>
        <entry>28,55s/&quot;/'/gc</entry>
        <entry>32,55s/&quot;/'/gc</entry>
        <entry>128,138s/&quot;/'/gc</entry>
        <entry>w'</entry>
        <entry>s/host\.docker\.internal/localhost/g</entry>
        <entry>s/host\.docker\.internal/localhost/gc</entry>
        <entry>%s/host\.docker\.internal/localhost/gc</entry>
        <entry>W</entry>
        <entry>qw</entry>
        <entry>wq</entry>
        <entry>q</entry>
        <entry>nohl</entry>
        <entry encoding="base64">JzwsJz53</entry>
        <entry>:w</entry>
        <entry>w</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
  </component>
  <component name="VimKeySettings">
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed J</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed K</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
  <component name="VimMarksSettings">
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/GenDev/loquentia/src/main/java/com/genesys/loquentia/botproviders/cicero/CiceroSession.java" timestamp="1592568309011">
        <mark key="'" line="69" column="18" />
        <mark key="[" line="176" column="105" />
        <mark key="]" line="177" column="38" />
        <mark key="^" line="177" column="38" />
        <mark key="." line="177" column="37" />
      </file>
      <file name="$USER_HOME$/GenDev/loquentia/src/main/java/com/genesys/loquentia/sttproviders/STTSessionCallbackImplV1.java" timestamp="1592568731373">
        <mark key="'" line="31" column="36" />
        <mark key="[" line="44" column="8" />
        <mark key="]" line="44" column="12" />
        <mark key="." line="44" column="8" />
        <mark key="^" line="44" column="12" />
      </file>
      <file name="$USER_HOME$/GenDev/loquentia/src/test/java/com/genesys/loquentia/botproviders/cicero/CiceroSessionTest.java" timestamp="1592408181721">
        <mark key="[" line="193" column="47" />
        <mark key="]" line="93" column="86" />
        <mark key="^" line="93" column="86" />
        <mark key="." line="93" column="85" />
      </file>
      <file name="$USER_HOME$/GenDev/loquentia/src/main/java/com/genesys/loquentia/botproviders/cicero/model/Error.java" timestamp="1592856521453" />
      <file name="$USER_HOME$/GenDev/loquentia/src/main/java/com/genesys/loquentia/botproviders/cicero/model/prompts/OutputPrompts.java" timestamp="1592406581973">
        <mark key="'" line="30" column="24" />
      </file>
      <file name="$USER_HOME$/GenDev/audio-streaming/src/client/src/resampler.js" timestamp="1592510849697">
        <mark key="'" line="28" column="34" />
        <mark key="[" line="31" column="0" />
        <mark key="]" line="31" column="0" />
        <mark key="." line="31" column="0" />
      </file>
      <file name="$APPLICATION_HOME_DIR$/plugins/JavaScriptLanguage/jsLanguageServicesImpl/external/lib.dom.d.ts" timestamp="1592513470306">
        <mark key="[" line="10292" column="10" />
        <mark key="]" line="10292" column="21" />
      </file>
      <file name="$USER_HOME$/GenDev/Teach-ReactiveSpring/learn-reactivespring/src/main/java/com/learnreactivespring/repository/ItemReactiveCappedRepository.java" timestamp="1592567992751">
        <mark key="'" line="13" column="25" />
      </file>
      <file name="$USER_HOME$/GenDev/Teach-ReactiveSpring/learn-reactivespring/src/main/java/com/learnreactivespring/controller/v1/ItemController.java" timestamp="1592568030868">
        <mark key="'" line="86" column="74" />
      </file>
      <file name="/Dummy.txt" timestamp="1592842067208">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/GenDev/loquentia/src/main/java/com/genesys/loquentia/sttproviders/STTRecognitionHandlerImplV1.java" timestamp="1592568520946">
        <mark key="'" line="9" column="32" />
      </file>
      <file name="$USER_HOME$/GenDev/loquentia/src/main/java/com/genesys/loquentia/botproviders/AbstractBotSessionV1.java" timestamp="1592568896989">
        <mark key="'" line="91" column="29" />
      </file>
      <file name="$USER_HOME$/GenDev/loquentia/src/main/java/com/genesys/loquentia/botproviders/SttTtsBotSessionV1.java" timestamp="1592568512732">
        <mark key="'" line="76" column="41" />
      </file>
      <file name="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" timestamp="1592860679012">
        <mark key="'" line="333" column="8" />
        <mark key="[" line="54" column="0" />
        <mark key="]" line="54" column="0" />
        <mark key="." line="54" column="0" />
        <mark key="^" line="27" column="0" />
      </file>
      <file name="$USER_HOME$/GenDev/Teach-ReactiveSpring/learn-reactivespring/src/test/java/com/learnreactivespring/handler/ItemStreamsHandlerTest.java" timestamp="1592567846460">
        <mark key="'" line="51" column="19" />
      </file>
      <file name="$USER_HOME$/GenDev/audio-streaming/src/client/package.json" timestamp="1592566041716">
        <mark key="[" line="31" column="0" />
        <mark key="]" line="31" column="0" />
        <mark key="." line="31" column="0" />
      </file>
      <file name="$USER_HOME$/GenDev/loquentia/src/main/java/com/genesys/loquentia/botproviders/cicero/CiceroProvider.java" timestamp="1592568592284">
        <mark key="'" line="128" column="51" />
      </file>
      <file name="$USER_HOME$/GenDev/Teach-ReactiveSpring/learn-reactivespring/src/main/java/com/learnreactivespring/repository/ItemReactiveRepository.java" timestamp="1592567928038">
        <mark key="'" line="9" column="15" />
      </file>
      <file name="/fragment.java" timestamp="1592842067197">
        <mark key="[" line="0" column="0" />
      </file>
    </filemarks>
    <jumps>
      <jump line="1343" column="16" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="556" column="22" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1344" column="29" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1280" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1195" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1191" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="666" column="33" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="665" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="577" column="17" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="558" column="7" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="681" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1338" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="565" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1221" column="20" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="673" column="16" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1224" column="18" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="567" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="435" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="451" column="21" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="453" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="671" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="608" column="40" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="599" column="35" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="597" column="16" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="590" column="16" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="579" column="16" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="578" column="17" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="108" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="669" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="593" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="582" column="16" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="581" column="17" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="569" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="571" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="458" column="31" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="670" column="39" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="588" column="17" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="589" column="16" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="596" column="16" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="598" column="35" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="607" column="73" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="110" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="683" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="109" column="7" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="566" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1340" column="23" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="122" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1237" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="559" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="553" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1218" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1074" column="25" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1049" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1045" column="31" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1208" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1212" column="11" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1242" column="26" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1300" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1378" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1377" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1245" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1249" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1176" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1047" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1073" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1308" column="27" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1307" column="27" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1216" column="17" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1050" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1220" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1092" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1052" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1181" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1342" column="20" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="562" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="554" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1064" column="63" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1080" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1078" column="15" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1055" column="33" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1194" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="107" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1283" column="27" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1081" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1067" column="12" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="104" column="4" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="0" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1357" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1352" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1354" column="2" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="54" column="6" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="55" column="6" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="53" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="50" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="49" column="0" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1186" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1084" column="35" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="1345" column="23" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="561" column="9" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
      <jump line="333" column="8" filename="$USER_HOME$/GenDev/audio-streaming/src/client/src/app.js" />
    </jumps>
  </component>
  <component name="VimRegisterSettings">
    <registers>
      <register name="&quot;" type="2">
        <text encoding="base64">Y29uc3QgQk9UX1ZFUlNJT05fUVVFUllfUEFSQU0gPSAnYm90dmVyc2lvbic7Cg==</text>
      </register>
      <register name="-" type="4">
        <text encoding="base64">bWVkaWFTdHJlYW1Tb3VyY2Ug</text>
      </register>
      <register name="/" type="4">
        <text encoding="base64">XDxjb25zdFw+</text>
      </register>
      <register name="0" type="4">
        <text>ScriptProcessorNode</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">Y29uc3QgQk9UX1ZFUlNJT05fUVVFUllfUEFSQU0gPSAnYm90dmVyc2lvbic7Cg==</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">Y29uc3QgSldUX1FVRVJZX1BBUkFNID0gJ2p3dCc7Cg==</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">J3VzZSBzdHJpY3QnOwoKaW1wb3J0ICdAYmFiZWwvcG9seWZpbGwnOwppbXBvcnQgJ2Jvb3RzdHJhcCc7CmltcG9ydCB7IFJlc2FtcGxlciB9IGZyb20gJy4vcmVzYW1wbGVyJzsKaW1wb3J0IHsgVm9pY2VEaWFsb2dDbGllbnQgfSBmcm9tICcuL3ZvaWNlX2RpYWxvZ19jbGllbnQnOwppbXBvcnQgeyBnZXRMUUF1dGhvcml6ZWRVUkwsIHNpZ25JblVzaW5nSW1wbGljaXRGbG93SWZOZWVkZWQgfSBmcm9tICcuL2F1dGhvcml6YXRpb24nOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwppbXBvcnQgewogICAgZ2V0T3JnYW5pemF0aW9ucywKICAgIHNhdmVPcmdhbml6YXRpb24sCiAgICByZW1vdmVPcmdhbml6YXRpb24sCiAgICBnZXRCb3RJbnRlZ3JhdGlvbnMsCiAgICBzYXZlQm90SW50ZWdyYXRpb24sCiAgICByZW1vdmVCb3RJbnRlZ3JhdGlvbiwKICAgIGdldEJvdHMsCiAgICBzYXZlQm90LAogICAgcmVtb3ZlQm90Cn0gZnJvbSAnLi9zdG9yYWdlJwppbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJzsKCi8vIEdldCBTZXJ2aWNlIFVSTHMgdmlhIHNlcnZpY2UtZGlzY292ZXJ5LW5vZGUuCmNvbnN0IERJQUxPR0ZMT1dfREVGQVVMVF9FTlZJUk9OTUVOVCA9ICdkcmFmdCc7CmNvbnN0IGNvbnZlcnNhdGlvbkNvbnRhaW5lckRpdiA9ICQoJyNjb252ZXJzYXRpb25Db250YWluZXInKTsKY29uc3QgY29udmVyc2F0aW9uRGl2ID0gJCgnI2NvbnZlcnNhdGlvbicpOwoKCi8qKgogKiBMb29rdXAgdGFibGUgdG8gZGV0ZXJtaW5lIHUtTGF3IGV4cG9uZW50IGZyb20gY2xhbXBlZCBhYnNvbHV0ZSBzYW1wbGUgdmFsdWUuCiAqLwpjb25zdCB1bGF3RXhwTHV0ID0gbmV3IFVpbnQ4QXJyYXkoWwogICAgMCwgMSwgMiwgMiwgMywgMywgMywgMywgNCwgNCwgNCwgNCwgNCwgNCwgNCwgNCwKICAgIDUsIDUsIDUsIDUsIDUsIDUsIDUsIDUsIDUsIDUsIDUsIDUsIDUsIDUsIDUsIDUsCiAgICA2LCA2LCA2LCA2LCA2LCA2LCA2LCA2LCA2LCA2LCA2LCA2LCA2LCA2LCA2LCA2LAogICAgNiwgNiwgNiwgNiwgNiwgNiwgNiwgNiwgNiwgNiwgNiwgNiwgNiwgNiwgNiwgNiwKICAgIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsCiAgICA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LAogICAgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywKICAgIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcKXSk7CgpsZXQgTG9xdWVudGlhX1VSTCA9IG51bGw7CmxldCBsb2doaXN0b3J5ICA9ICcnOwpsZXQgZ19jdXJyZW50U3BlZWNoQnViYmxlID0gewogICAgJ2h1bWFuJzogbnVsbCwKICAgICdib3QnOiBudWxsCn07CgovLyBCb3QgUHJvdmlkZXJzLgpjb25zdCBESUFMT0dGTE9XX1BST1ZJREVSID0gJ2RpYWxvZ2Zsb3cnOwpjb25zdCBESUFMT0dFTkdJTkVfUFJPVklERVIgPSAnZGlhbG9nRW5naW5lJzsKCi8vIFF1ZXJ5IFBhcmFtcy4KY29uc3QgQk9UX0lEX1FVRVJZX1BBUkFNID0gJ2JvdGlkJzsKY29uc3QgQk9UX1ZFUlNJT05fUVVFUllfUEFSQU0gPSAnYm90dmVyc2lvbic7CmNvbnN0IEpXVF9RVUVSWV9QQVJBTSA9ICdqd3QnOwpjb25zdCBUVFNfUVVFUllfUEFSQU0gPSAndHRzJzsKCi8vIEdsb2JhbHMuCmNvbnN0IGdfYXVkaW9CdWZmZXJTaXplID0gNDA5NjsKY29uc3QgZ190YXJnZXRTYW1wbGVSYXRlID0gMTYwMDA7CmNvbnN0IGdfZm9ybWF0ID0gJ0wxNic7IC8vICdQQ01VJyBvciAnTDE2Jwpjb25zdCBnX2JvdGxpc3QgPSB7CiAgICBkaWFsb2dib3RzOiBbCiAgICAgICAgewogICAgICAgICAgICBwcm92aWRlcjogRElBTE9HRkxPV19QUk9WSURFUiwKICAgICAgICAgICAgbGFiZWw6ICJEaWFsb2dmbG93IiwKICAgICAgICAgICAgY2FwYWJpbGl0aWVzOiB7CiAgICAgICAgICAgICAgICB2b2ljZTogdHJ1ZSwKICAgICAgICAgICAgICAgIHRleHQ6IGZhbHNlLAogICAgICAgICAgICAgICAgZHRtZjogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgIHByb3ZpZGVyOiBESUFMT0dFTkdJTkVfUFJPVklERVIsCiAgICAgICAgICAgIGxhYmVsOiAiRGlhbG9nIEVuZ2luZSIsCiAgICAgICAgICAgIGNhcGFiaWxpdGllczogewogICAgICAgICAgICAgICAgdm9pY2U6IHRydWUsCiAgICAgICAgICAgICAgICB0ZXh0OiBmYWxzZSwKICAgICAgICAgICAgICAgIGR0bWY6IHRydWUKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIF0KfTsKLy9kZWZhdWx0IHR0c0VuZ2luZUxhbmd1YWdlTWFwCmNvbnN0IGdfdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nID0gWwogICAgewogICAgICAgIGxhbmd1YWdlOiAiZW4tVVMiLAogICAgICAgIGVuZ2luZUlkOiAiZ29vZ2xlIiwKICAgICAgICBkZWZhdWx0Vm9pY2VJZDogImVuLVVTLVdhdmVuZXQtQS1lbi1VUyIKICAgIH0sCiAgICB7CiAgICAgICAgbGFuZ3VhZ2U6ICJmci1DQSIsCiAgICAgICAgZW5naW5lSWQ6ICJhY2FwZWxhIiwKICAgICAgICBkZWZhdWx0Vm9pY2VJZDogIkxvdWlzZS1mci1DQSIKICAgIH0sCiAgICB7CiAgICAgICAgbGFuZ3VhZ2U6ICJlbi1HQiIsCiAgICAgICAgZW5naW5lSWQ6ICJwb2xseSIsCiAgICAgICAgZGVmYXVsdFZvaWNlSWQ6ICJBbXktZW4tR0IiCiAgICB9Cl07CgpsZXQgZ19kaWFsb2cgPSBudWxsOwpsZXQgZ19hdWRpb0NvbnRleHQgPSBudWxsOwpsZXQgZ19tZWRpYVRyYWNrID0gbnVsbDsKbGV0IGdfcGxheWluZ1NvdXJjZSA9IG51bGw7CmxldCBnX3N1cHBvcnRzR2V0VXNlck1lZGlhID0gbnVsbDsKCi8vIENvbnRyb2xzIGZvciBtb25pdG9yIHdoaWNoIGNoYW5uZWwgZ2V0cyBtaWNyb3Bob25lIGF1ZGlvOiAnY2FsbGVyJywgJ2FnZW50Jywgb3IgJ211dGVkJwpsZXQgZ19tb25pdG9yTGlzdGVuU3JjID0gJ2NhbGxlcic7CgpmdW5jdGlvbiB0cmFjZSh0ZXh0KSB7CiAgICBsZXQgbGluZSA9IChwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDApLnRvRml4ZWQoMykgKyAiOiAiICsgdGV4dDsKCiAgICBjb25zb2xlLmxvZyhsaW5lKTsKICAgIGxvZ2hpc3RvcnkgKz0gbGluZSArICJcbiI7CiAgICAkKCIjbG9nVGV4dCIpLnRleHQobG9naGlzdG9yeSk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZV90cmFuc2NyaXB0KHdobywgdGV4dCkgewogICAgaWYodGV4dC5sZW5ndGggPiAwKSB7CiAgICAgICAgaWYoZ19jdXJyZW50U3BlZWNoQnViYmxlW3dob10gPT0gbnVsbCkgewogICAgICAgICAgICBnX2N1cnJlbnRTcGVlY2hCdWJibGVbd2hvXSA9ICQoJzxkaXY+JywgewogICAgICAgICAgICAgICAgY2xhc3M6IGBidWJibGUgJHt3aG99YAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnZlcnNhdGlvbkRpdi5hcHBlbmQoZ19jdXJyZW50U3BlZWNoQnViYmxlW3dob10pOwogICAgICAgIH0KCiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgbGV0IHRpbWVzdGFtcCA9IGZvcm1hdFRpbWVOdW1iZXIobm93LmdldEhvdXJzKCkpICsgIjoiICsgZm9ybWF0VGltZU51bWJlcihub3cuZ2V0TWludXRlcygpKSArICI6IiArIGZvcm1hdFRpbWVOdW1iZXIobm93LmdldFNlY29uZHMoKSk7CgogICAgICAgIGdfY3VycmVudFNwZWVjaEJ1YmJsZVt3aG9dLmh0bWwoIlsiICsgdGltZXN0YW1wICsgIl08YnIvPiIgKyB0ZXh0KTsKICAgICAgICBjb252ZXJzYXRpb25EaXYuc2Nyb2xsVG9wKGNvbnZlcnNhdGlvbkRpdlswXS5zY3JvbGxIZWlnaHQpOwogICAgfQp9CgpmdW5jdGlvbiB1cGRhdGVfdHJhbnNjcmlwdF9maW5hbCh3aG8sIHRleHQpIHsKICAgIGlmKGdfY3VycmVudFNwZWVjaEJ1YmJsZVt3aG9dID09IG51bGwpIHsKICAgICAgICBnX2N1cnJlbnRTcGVlY2hCdWJibGVbd2hvXSA9ICQoJzxkaXY+JywgewogICAgICAgICAgICBjbGFzczogYGJ1YmJsZSAke3dob31gCiAgICAgICAgfSk7CgogICAgICAgIGNvbnZlcnNhdGlvbkRpdi5hcHBlbmQoZ19jdXJyZW50U3BlZWNoQnViYmxlW3dob10pOwogICAgfQoKICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOwogICAgbGV0IHRpbWVzdGFtcCA9IGZvcm1hdFRpbWVOdW1iZXIobm93LmdldEhvdXJzKCkpICsgIjoiICsgZm9ybWF0VGltZU51bWJlcihub3cuZ2V0TWludXRlcygpKSArICI6IiArIGZvcm1hdFRpbWVOdW1iZXIobm93LmdldFNlY29uZHMoKSk7CgogICAgZ19jdXJyZW50U3BlZWNoQnViYmxlW3dob10uaHRtbCgiWyIgKyB0aW1lc3RhbXAgKyAiXTxici8+IiArIHRleHQpOwogICAgZ19jdXJyZW50U3BlZWNoQnViYmxlW3dob10gPSBudWxsOwogICAgY29udmVyc2F0aW9uRGl2LnNjcm9sbFRvcChjb252ZXJzYXRpb25EaXZbMF0uc2Nyb2xsSGVpZ2h0KTsKfTsKCmZ1bmN0aW9uIGZvcm1hdFRpbWVOdW1iZXIobnVtYmVyKSB7CiAgICByZXR1cm4gKG51bWJlciA8IDEwKSA/ICIwIiArIG51bWJlciA6IG51bWJlcjsKfQoKZnVuY3Rpb24gdXBkYXRlX3RyYW5zY3JpcHRfY29udmVyc2F0aW9uX2VuZChyZWFzb24pIHsKICAgIGxldCB0ZXh0ID0gJ0NvbnZlcnNhdGlvbiBDbG9zZWQnOwoKICAgIGlmKHJlYXNvbikgewogICAgICAgIHRleHQgKz0gJy4gUmVhc29uOiAnK3JlYXNvbjsKICAgIH0KCiAgICBjb252ZXJzYXRpb25EaXYuYXBwZW5kKCQoJzxkaXY+JywgewogICAgICAgIGNsYXNzOiAnYnViYmxlIGNvbnZlcnNhdGlvbmVuZGVkIG1iLTInLAogICAgICAgIGh0bWw6IHRleHQKICAgICAgICB9KQogICAgKTsKICAgIGNvbnZlcnNhdGlvbkRpdi5zY3JvbGxUb3AoY29udmVyc2F0aW9uRGl2WzBdLnNjcm9sbEhlaWdodCk7Cn07CgpmdW5jdGlvbiBjb252ZXJzYXRpb25fc3RhcnQoKSB7CiAgICBjb252ZXJzYXRpb25EaXYuYXBwZW5kKCQoJzxkaXY+JywgewogICAgICAgIGNsYXNzOiAnYnViYmxlIGNvbnZlcnNhdGlvbnN0YXJ0ZWQgbWItMicsCiAgICAgICAgaHRtbDogJ0NvbnZlcnNhdGlvbiBTdGFydGVkJwogICAgICAgIH0pCiAgICApOwogICAgY29udmVyc2F0aW9uRGl2LnNjcm9sbFRvcChjb252ZXJzYXRpb25EaXZbMF0uc2Nyb2xsSGVpZ2h0KTsKfTsKCmZ1bmN0aW9uIGNvbnZlcnNhdGlvbl90cmFuc2ZlcigpIHsKICAgIGNvbnZlcnNhdGlvbkRpdi5hcHBlbmQoJCgnPGRpdj4nLCB7CiAgICAgICAgY2xhc3M6ICdidWJibGUgY29udmVyc2F0aW9udHJhbnNmZXIgbWItMicsCiAgICAgICAgaHRtbDogJ0NvbnZlcnNhdGlvbiBUcmFuc2ZlcicKICAgICAgICB9KQogICAgKTsKICAgIGNvbnZlcnNhdGlvbkRpdi5zY3JvbGxUb3AoY29udmVyc2F0aW9uRGl2WzBdLnNjcm9sbEhlaWdodCk7Cn07CgpmdW5jdGlvbiBhZGRfcmVzdWx0KGRhdGEpIHsKICAgIGNvbnN0IGludGVudENvbmYgPSAoZGF0YS5pbnRlbnQgJiYgZGF0YS5pbnRlbnQuY29uZmlkZW5jZSAmJiBgICgkeyhkYXRhLmludGVudC5jb25maWRlbmNlKjEwMDB8MCkvMTAwMH0pYCkgfHwgJyc7CgogICAgY29udmVyc2F0aW9uRGl2LmFwcGVuZCgKICAgICAgICAkKCc8ZGl2PicsIHtjbGFzczogJ2NhcmQgZGlhbG9ncmVzdWx0IGJnLWxpZ2h0IG10LTMgbWItMycsIGlkOiAncmVzdWx0LWNhcmQnfSkKICAgICAgICAuYXBwZW5kKAogICAgICAgICAgICAkKCc8ZGl2PicsIHtjbGFzczogJ2NhcmQtaGVhZGVyJywgdGV4dDogJ0RpYWxvZyBSZXN1bHQnfSkKICAgICAgICApCiAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgJCgnPGRpdj4nLCB7Y2xhc3M6ICdjYXJkLWJvZHknfSkKICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICQoJzxoNT4nLCB7Y2xhc3M6ICdjYXJkLXRpdGxlIHRleHQtcHJpbWFyeSBtYi00JywgdGV4dDogYEludGVudDogJHtkYXRhLmludGVudC5uYW1lIHx8IGRhdGEuaW50ZW50fSR7aW50ZW50Q29uZn1gfSkKICAgICAgICAgICAgKQogICAgICAgICAgICAuYXBwZW5kKAogICAgICAgICAgICAgICAgJCgnPGg2PicsIHtjbGFzczogJ2NhcmQtc3VidGl0bGUgbWItMiB0ZXh0LXByaW1hcnknLCB0ZXh0OiBgcmVzdWx0OiAke2RhdGEucmVzdWx0IHx8ICcnfWB9KQogICAgICAgICAgICApCiAgICAgICAgICAgIC5hcHBlbmQoCiAgICAgICAgICAgICAgICAkKCc8aDY+Jywge2NsYXNzOiAnY2FyZC1zdWJ0aXRsZSBtYi0yIHRleHQtcHJpbWFyeScsIHRleHQ6IGBtb2RlOiAke2RhdGEubW9kZSB8fCAnJ31gfSkKICAgICAgICAgICAgKQogICAgICAgICAgICAuYXBwZW5kKAogICAgICAgICAgICAgICAgJCgnPGg2PicsIHtjbGFzczogJ2NhcmQtc3VidGl0bGUgbWItMiB0ZXh0LXByaW1hcnknLCB0ZXh0OiAnc2xvdHM6J30pCiAgICAgICAgICAgICkKICAgICAgICAgICAgLmFwcGVuZCgKICAgICAgICAgICAgICAgICQoJzxwPicsIHtjbGFzczogJ2NhcmQtdGV4dCB0ZXh0LXByaW1hcnknfSkKICAgICAgICAgICAgICAgIC5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgJCgnPHByZT4nLCB7Y2xhc3M6ICd0ZXh0LXByaW1hcnknfSkudGV4dChKU09OLnN0cmluZ2lmeShkYXRhLnNsb3RzLCBudWxsLCAxKSkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgICkKICAgICk7CiAgICBjb252ZXJzYXRpb25EaXYuc2Nyb2xsVG9wKGNvbnZlcnNhdGlvbkRpdlswXS5zY3JvbGxIZWlnaHQpOwp9CgpmdW5jdGlvbiB1bGF3RW5jb2RlU2FtcGxlKHNhbXBsZSkgewogICAgbGV0IHg7CiAgICBsZXQgdWxhdyA9IDB4ZmY7CgogICAgaWYoc2FtcGxlIDwgMCkgewogICAgICAgIHggPSAoKHNhbXBsZSA8PSAtMzI2MzUpID8gMzI2MzUgOiAtc2FtcGxlKSArIDEzMjsgICAgIC8vIE5lZ2F0ZSBzYW1wbGUsIGNsYW1wLCBhbmQgYWRkIGJpYXMgKDQqMzMpCiAgICAgICAgdWxhdyA9IDB4N2Y7CiAgICB9IGVsc2UgewogICAgICAgIHggPSAoKHNhbXBsZSA+PSAgMzI2MzUpID8gMzI2MzUgOiAgc2FtcGxlKSArIDEzMjsgICAgIC8vIENsYW1wIHNhbXBsZSBhbmQgYWRkIGJpYXMgKDQqMzMpCiAgICB9CgogICAgY29uc3QgZXhwID0gdWxhd0V4cEx1dFt4ID4+IDhdOwoKICAgIHJldHVybiB1bGF3IC0gKChleHAgPDwgNCkgfCAoKHggPj4gKGV4cCArIDMpKSAmIDB4MGYpKTsKfQoKZnVuY3Rpb24gc3RhcnRCb3QoYm90SWQsIGJvdFZlcnNpb24sIHByZXZpb3VzRGlhbG9nUmVzdWx0KSB7CiAgICBjb25zdCBkZWZhdWx0Ym90ID0gKHgsIG4pID0+ICh4W25dICYmIHhbbl1bMF0gJiYgeFtuXVswXS5ib3RJZCk7CgogICAgYm90SWQgPSBib3RJZCB8fCAoZ19ib3RsaXN0ICYmIChkZWZhdWx0Ym90KGdfYm90bGlzdCwgJ2RpYWxvZ2JvdHMnKSB8fCBkZWZhdWx0Ym90KGdfYm90bGlzdCwgJ2Fzc2lzdGFudHMnKSkpOwoKICAgIGlmKCFib3RJZCkgewogICAgICAgICQoJyNlcnJvck1lc3NhZ2UnKS50ZXh0KCdObyBib3RzIGF2YWlsYWJsZSEnKTsKICAgICAgICAkKCcjZXJyb3JNZXNzYWdlQ29udGFpbmVyJykuc2hvdygpOwogICAgfQoKICAgIGxldCBkaWFsb2cgPSBudWxsOwogICAgbGV0IGxhc3RyZXN1bHQgPSBudWxsOwogICAgY29uc3QgdHRzbmFtZSA9ICgocHJldmlvdXNEaWFsb2dSZXN1bHQgfHwge30pLnNsb3RzIHx8IHt9KS50dHM7CiAgICBjb25zdCBpc01vbml0b3IgPSAoYm90SWQgPT09ICdtb25pdG9yJykgfHwgKChnX2JvdGxpc3QgJiYgZ19ib3RsaXN0LmFzc2lzdGFudHMgfHwgW10pLmZpbmQoIGIgPT4gKGIuYm90SWQgPT09IGJvdElkKSkgIT09IHVuZGVmaW5lZCk7CiAgICBjb25zdCBjb252ZXJzYXRpb25JZCA9IHV1aWR2NCgpOwogICAgY29uc3QgZGlhbG9nQ29uZmlnID0gewogICAgICAgIGxvZ2dlcjogdHJhY2UsCiAgICAgICAgZm9ybWF0OiBnX2Zvcm1hdCwKICAgICAgICBzYW1wbGVyYXRlOiBnX3RhcmdldFNhbXBsZVJhdGUsCiAgICAgICAgY2hhbm5lbHM6IChpc01vbml0b3IgPyAyIDogMSksCiAgICAgICAgb3BlblBhcmFtczogewogICAgICAgICAgICBsYW5ndWFnZTogJCgnI2xhbmd1YWdlQ29kZUlkJykudmFsKCksCiAgICAgICAgICAgIGluY2x1ZGVSZWNvZ25pdGlvbjogdHJ1ZSwKICAgICAgICAgICAgY29udmVyc2F0aW9uSWQsCiAgICAgICAgICAgIHR0c0VuZ2luZUxhbmd1YWdlTWFwcGluZzogZ2VuZXJhdGVUVFNFbmdpbmVMYW5ndWFnZU1hcHBpbmdKc29uKCkKICAgICAgICB9CiAgICB9OwoKICAgIGlmKHByZXZpb3VzRGlhbG9nUmVzdWx0KSB7CiAgICAgICAgZGlhbG9nQ29uZmlnLm9wZW5QYXJhbXMuZGlhbG9nUmVzdWx0ID0gcHJldmlvdXNEaWFsb2dSZXN1bHQ7CiAgICB9CgogICAgZGlhbG9nQ29uZmlnLm9ub3BlbmVkID0gKCkgPT4gewogICAgICAgIHRyYWNlKGBEaWFsb2cgJHtkaWFsb2cuaWR9IC0gb25vcGVuZWRgKTsKICAgICAgICB0cmFjZShgQ29udmVyc2F0aW9uIElEOiAke2NvbnZlcnNhdGlvbklkfWApOwoKICAgICAgICBpZihkaWFsb2cgIT09IGdfZGlhbG9nKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHdhdGNoZXJsaW5rRWwgPSAkKCcjd2F0Y2hlcmxpbmsnKTsKICAgICAgICB3YXRjaGVybGlua0VsLmF0dHIoJ2hyZWYnLCBgd2F0Y2hlci5odG1sP2lkPSR7ZGlhbG9nLmlkfWApOwogICAgICAgIHdhdGNoZXJsaW5rRWwucmVtb3ZlQXR0cigiaGlkZGVuIik7CgogICAgICAgIC8vIFRPRE86CiAgICAgICAgLy8gLSBTdG9wIHNlbmRpbmcgYXVkaW8gd2hlbiB1c2VyIHN0YXJ0cyB0eXBpbmcgdGV4dCBvciBhZnRlciBoYXZpbmcgaGl0IGEgRFRNRiBrZXkKICAgICAgICAvLyAtIERpc2FibGUgRFRNRiBrZXlzIGFmdGVyIHVzZXIgaGFzIHN0YXJ0ZWQgZW50ZXJpbmcgdGV4dC4KICAgICAgICAvLyAtIEhhdmUgYm90IGluZGljYXRlIHdoZXRoZXIgaXQgc3VwcG9ydHMgRFRNRiBhbmQgdGV4dCBhcyBwYXJ0IG9mICdvcGVuJyByZXNwb25zZSAoImNhcGFiaWxpdGllcyIpCiAgICAgICAgLy8KICAgICAgICAvLyBIQUNLOiBXaGVuIHdlJ3JlIHRlc3RpbmcgbW9uaXRvciBjbGllbnQsIHRleHQgb3IgRFRNRiBpbnB1dCBpcyBub3Qgc3VwcG9ydGVkLCBzbyBkb24ndCBlbmFibGUKICAgICAgICAvLwogICAgICAgIGNvbnN0IHRleHRUb1NlbmRFbCA9ICQoJyN0ZXh0VG9TZW5kJyk7CiAgICAgICAgY29uc3QgYnRuU2VuZEVsID0gJCgnI2J0blNlbmQnKTsKICAgICAgICBjb25zdCBrZXlQYWRFbCA9ICQoJyNrZXlwYWQnKTsKCiAgICAgICAgaWYoIWlzTW9uaXRvcikgewogICAgICAgICAgICBrZXlQYWRFbC5jaGlsZHJlbignYnV0dG9uJykuZWFjaCgoaSwgYnRuKSA9PiB7CiAgICAgICAgICAgICAgICBidG4uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGJ0bi5vbmNsaWNrID0gKGV2KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZGlhbG9nLnNlbmREdG1mRGlnaXQoYnRuLnRleHRDb250ZW50KTsKICAgICAgICAgICAgICAgICAgICBidG4uYmx1cigpOyAvLyBSZW1vdmUgdGhlIGZvY3VzCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnN0IHNlbmRUZXh0SGFuZGVyID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHRleHRUb1NlbmRFbC52YWwoKTsKCiAgICAgICAgICAgICAgICBpZih0ZXh0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBkaWFsb2cuc2VuZFRleHQodGV4dCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGV4dFRvU2VuZEVsLnZhbCgnJyk7CiAgICAgICAgICAgICAgICBidG5TZW5kRWwuYmx1cigpOwogICAgICAgICAgICAgICAgYnRuU2VuZEVsLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0ZXh0VG9TZW5kRWwucmVtb3ZlQXR0cignZGlzYWJsZWQnKTsKICAgICAgICAgICAgdGV4dFRvU2VuZEVsLm9uKCdpbnB1dCcsIChldikgPT4gewogICAgICAgICAgICAgICAgaWYodGV4dFRvU2VuZEVsLnZhbCgpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBidG5TZW5kRWwucmVtb3ZlQXR0cignZGlzYWJsZWQnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYnRuU2VuZEVsLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0ZXh0VG9TZW5kRWwub24oJ2tleXVwJywgKGV2KSA9PiB7CiAgICAgICAgICAgICAgICBpZihldi5rZXlDb2RlID09IDEzKSB7CiAgICAgICAgICAgICAgICAgICAgc2VuZFRleHRIYW5kZXIoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGJ0blNlbmRFbC5vbignY2xpY2snLCAoZXYpID0+IHsKICAgICAgICAgICAgICAgIHNlbmRUZXh0SGFuZGVyKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY29udmVyc2F0aW9uX3N0YXJ0KCk7CiAgICB9OwoKICAgIGRpYWxvZ0NvbmZpZy5vbmNsb3NlZCA9ICgpID0+IHsKICAgICAgICB0cmFjZShgRGlhbG9nICR7ZGlhbG9nLmlkfSAtIG9uY2xvc2VkYCk7CgogICAgICAgIGNvbnN0IHRleHRUb1NlbmRFbCA9ICQoJyN0ZXh0VG9TZW5kJyk7CiAgICAgICAgY29uc3QgYnRuU2VuZEVsID0gJCgnI2J0blNlbmQnKTsKICAgICAgICBjb25zdCBrZXlwYWRFbCA9ICQoJyNrZXlwYWQnKTsKCiAgICAgICAgaWYoZ19kaWFsb2cgPT09IGRpYWxvZykgewogICAgICAgICAgICB1cGRhdGVfdHJhbnNjcmlwdF9jb252ZXJzYXRpb25fZW5kKCk7CiAgICAgICAgICAgIGtleXBhZEVsLmNoaWxkcmVuKCdidXR0b24nKS5lYWNoKChpLCBidG4pID0+IHsKICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBidG5TZW5kRWwuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTsKICAgICAgICAgICAgYnRuU2VuZEVsLm9mZignY2xpY2snKTsKICAgICAgICAgICAgdGV4dFRvU2VuZEVsLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgIHRleHRUb1NlbmRFbC5vZmYoJ2lucHV0Jyk7CiAgICAgICAgICAgIHRleHRUb1NlbmRFbC5vZmYoJ2tleXVwJyk7CiAgICAgICAgICAgIHRleHRUb1NlbmRFbC52YWwoJycpOwogICAgICAgICAgICBnX2RpYWxvZyA9IG51bGw7CgogICAgICAgICAgICBpZihsYXN0cmVzdWx0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBib3RTZWxlY3RvciA9ICQoJyNib3RTZWxlY3RvcicpOwogICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBib3RTZWxlY3Rvci5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5kYXRhKCdwcm92aWRlcicpOwogICAgICAgICAgICAgICAgbGV0IGJvdFZlcnNpb247CgogICAgICAgICAgICAgICAgc3dpdGNoIChwcm92aWRlcikgewogICAgICAgICAgICAgICAgICAgIGNhc2UgRElBTE9HRkxPV19QUk9WSURFUjoKICAgICAgICAgICAgICAgICAgICAgICAgYm90VmVyc2lvbiA9ICQoJyNkaWFsb2dmbG93RW52aXJvbm1lbnQnKS52YWwoKSB8fCBESUFMT0dGTE9XX0RFRkFVTFRfRU5WSVJPTk1FTlQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgRElBTE9HRU5HSU5FX1BST1ZJREVSOgogICAgICAgICAgICAgICAgICAgICAgICBib3RWZXJzaW9uID0gJCgnI2RpYWxvZ0VuZ2luZUJvdFZlcnNpb24nKS52YWwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoKGxhc3RyZXN1bHQuaW50ZW50Lm5hbWUgfHwgbGFzdHJlc3VsdC5pbnRlbnQpID09PSAnQm90U2VsZWN0ZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgYSBuZXcgYm90CiAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX3RyYW5zZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRCb3QobGFzdHJlc3VsdC5zbG90cy5ib3QsIGJvdFZlcnNpb24sIGxhc3RyZXN1bHQpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKChsYXN0cmVzdWx0LnNsb3RzIHx8IHt9KS5fbGl2ZUFnZW50SGFuZG9mZikgewogICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IGFzIGFzc2lzdGFudCAoc3RyZWFtaW5nIG1vbml0b3IpCiAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uX3RyYW5zZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRCb3QoJ21vbml0b3InLCBib3RWZXJzaW9uLCBsYXN0cmVzdWx0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgZGlhbG9nQ29uZmlnLm9uZXJyb3IgPSAoZXJyb3IpID0+IHsKICAgICAgICB0cmFjZShgRGlhbG9nICR7ZGlhbG9nLmlkfSAtIG9uZXJyb3I6ICR7ZXJyb3Iuc3RhY2sgfHwgSlNPTi5zdHJpbmdpZnkoZXJyb3IpfWApOwogICAgICAgIC8vIE1lZGlhIFNlcnZlciBjbG9zZXMgdGhlIGNvbm5lY3Rpb24gb24gYW55IGVycm9ycywgc28gd2UncmUgZ29pbmcgdG8gbWltaWMgdGhhdAogICAgICAgIC8vIGJlaGF2aW9yIGhlcmUgYXMgd2VsbC4KICAgICAgICBkaWFsb2cuY2xvc2UoKTsKICAgIH07CgogICAgZGlhbG9nQ29uZmlnLm9uc3RhcnRvZnNwZWVjaCA9ICgpID0+IHsKICAgICAgICB0cmFjZShgRGlhbG9nICR7ZGlhbG9nLmlkfSAtIG9uc3RhcnRvZnNwZWVjaGApOwogICAgfTsKCiAgICBkaWFsb2dDb25maWcub250cmFuc2NyaXB0ID0gKGRhdGEpID0+IHsKICAgICAgICB0cmFjZShgRGlhbG9nICR7ZGlhbG9nLmlkfSAtIG9udHJhbnNjcmlwdDogJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKTsKCiAgICAgICAgaWYoZGlhbG9nID09PSBnX2RpYWxvZykgewogICAgICAgICAgICBsZXQgd2hvID0gKChkYXRhLnBhcnRpY2lwYW50ID09PSAnaHVtYW4nKSB8fCAoZGF0YS5wYXJ0aWNpcGFudCA9PT0gJ2NhbGxlcicpKSA/ICdodW1hbicgOiAnYm90JzsKCiAgICAgICAgICAgIGlmIChkYXRhLmFjdG9yKSB7CiAgICAgICAgICAgICAgICB3aG8gPSBkYXRhLmFjdG9yOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihkYXRhLnRyYW5zY3JpcHQuaXNGaW5hbCkgewogICAgICAgICAgICAgICAgdXBkYXRlX3RyYW5zY3JpcHRfZmluYWwod2hvLCBkYXRhLnRyYW5zY3JpcHQudGV4dCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB1cGRhdGVfdHJhbnNjcmlwdCh3aG8sIGRhdGEudHJhbnNjcmlwdC50ZXh0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgZGlhbG9nQ29uZmlnLm9uc3VnZ2VzdGlvbiA9IChkYXRhKSA9PiB7CiAgICAgICAgdHJhY2UoYERpYWxvZyAke2RpYWxvZy5pZH0gLSBvbnN1Z2dlc3Rpb246ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7CgogICAgICAgIGlmKGRpYWxvZyA9PT0gZ19kaWFsb2cpIHsKICAgICAgICAgICAgJCgnI3N1Z2dlc3Rpb250ZXh0JykudGV4dChKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAxKSk7CiAgICAgICAgfQogICAgfTsKCiAgICBkaWFsb2dDb25maWcub25kaWFsb2dyZXN1bHQgPSAoZGF0YSkgPT4gewogICAgICAgIHRyYWNlKGBEaWFsb2cgJHtkaWFsb2cuaWR9IC0gb25kaWFsb2dyZXN1bHQ6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7CgogICAgICAgIGlmKGRpYWxvZyA9PT0gZ19kaWFsb2cpIHsKICAgICAgICAgICAgYWRkX3Jlc3VsdChkYXRhKTsKICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7CgogICAgICAgICAgICBsYXN0cmVzdWx0ID0gZGF0YTsKICAgICAgICB9CiAgICB9OwoKICAgIGRpYWxvZ0NvbmZpZy5vbmF1ZGlvID0gKHByb21wdEF1ZGlvKSA9PiB7CiAgICAgICAgaWYoZ19kaWFsb2cgIT09IGRpYWxvZykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBUT0RPOiBDcmVhdGUgYSBwbGF5IHF1ZXVlCgogICAgICAgIGlmKGdfcGxheWluZ1NvdXJjZSkgewogICAgICAgICAgICBnX3BsYXlpbmdTb3VyY2Uuc3RvcCgpOwogICAgICAgICAgICBnX3BsYXlpbmdTb3VyY2UgPSBudWxsOwoKICAgICAgICAgICAgaWYgKGRpYWxvZykgewogICAgICAgICAgICAgICAgZGlhbG9nLnBsYXliYWNrQ29tcGxldGUoMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGxldCBzb3VyY2UgPSBnX2F1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKCiAgICAgICAgZ19hdWRpb0NvbnRleHQuZGVjb2RlQXVkaW9EYXRhKAogICAgICAgICAgICBwcm9tcHRBdWRpby5hc1dhdigpLAogICAgICAgICAgICAoYnVmZmVyKSA9PiB7CiAgICAgICAgICAgICAgICB0cmFjZShgRGlhbG9nICR7ZGlhbG9nLmlkfSAtIEF1ZGlvIGRlY29kZWQuIExlbmd0aDogJHtidWZmZXIuZHVyYXRpb259c2ApOwogICAgICAgICAgICAgICAgc291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjsKICAgICAgICAgICAgICAgIHNvdXJjZS5jb25uZWN0KGdfYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTsKICAgICAgICAgICAgICAgIHNvdXJjZS5vbmVuZGVkID0gKGV2ZW50KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoc291cmNlID09PSBnX3BsYXlpbmdTb3VyY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2UoYERpYWxvZyAke2RpYWxvZy5pZH0gLSBQbGF5YmFjayBlbmRlZC4gRHVyYXRpb246ICR7YnVmZmVyLmR1cmF0aW9ufXNgKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLnBsYXliYWNrQ29tcGxldGUoYnVmZmVyLmR1cmF0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ19wbGF5aW5nU291cmNlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0cmFjZShgRGlhbG9nICR7ZGlhbG9nLmlkfSAtIFBsYXliYWNrIGVuZGVkIChkaWZmZXJlbnQgc291cmNlKWApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZ19wbGF5aW5nU291cmNlID0gc291cmNlOwogICAgICAgICAgICAgICAgc291cmNlLnN0YXJ0KDAsIDApOwogICAgICAgICAgICB9LAogICAgICAgICAgICAoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgIHRyYWNlKGBEaWFsb2cgJHtkaWFsb2cuaWR9IC0gRXJyb3IgZGVjb2RpbmcgYXVkaW86ICR7SlNPTi5zdHJpbmdpZnkoZXJyb3IpfWApOwogICAgICAgICAgICB9CiAgICAgICAgKTsKICAgIH07CgogICAgZGlhbG9nQ29uZmlnLm9uZmx1c2hhdWRpbyA9ICgpID0+IHsKICAgICAgICBpZihnX3BsYXlpbmdTb3VyY2UpIHsKICAgICAgICAgICAgZ19wbGF5aW5nU291cmNlLnN0b3AoKTsKICAgICAgICAgICAgZ19wbGF5aW5nU291cmNlID0gbnVsbDsKCiAgICAgICAgICAgIGlmIChkaWFsb2cpIHsKICAgICAgICAgICAgICAgIGRpYWxvZy5wbGF5YmFja0NvbXBsZXRlKDApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgc2VydmljZVVyaSA9IExvcXVlbnRpYV9VUkw7CgogICAgaWYoaXNNb25pdG9yKSB7CiAgICAgICAgLy8gU2ltdWxhdGUgYSBtb25pdG9yCiAgICAgICAgc2VydmljZVVyaSArPSAnbW9uaXRvcnMvd3MnOwoKICAgICAgICBpZihib3RJZCAhPT0gJ21vbml0b3InKSB7CiAgICAgICAgICAgIHNlcnZpY2VVcmkgKz0gYD8ke0JPVF9JRF9RVUVSWV9QQVJBTX09JHtlbmNvZGVVUklDb21wb25lbnQoYm90SWQpfWA7CiAgICAgICAgfQoKICAgICAgICBkaWFsb2dDb25maWcub3BlblBhcmFtc1snbWVkaWFwcm92aWRlci5zdHJlYW1pbmdNb2RlJ10gPSAnbW9uaXRvcic7CiAgICAgICAgJCgiI2lucHV0VGV4dEZpZWxkIikuaGlkZSgpOwogICAgICAgICQoIiNpbnB1dER0bWZLZXlwYWQiKS5oaWRlKCk7CiAgICAgICAgJCgiI3N1Z2dlc3Rpb25wYW5lbCIpLnNob3coKTsKICAgICAgICAkKCIjbW9uaXRvclNyYyIpLnNob3coKTsKCiAgICAgICAgY29uc3QgbW9uaXRvclNyY0NoYW5nZUhhbmRsZXIgPSAoKSA9PiB7CiAgICAgICAgICAgIGlmKCQoIiNtb25pdG9yU3JjQ2FsbGVyIilbMF0uY2hlY2tlZCkgewogICAgICAgICAgICAgICAgZ19tb25pdG9yTGlzdGVuU3JjID0gJ2NhbGxlcic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZigkKCIjbW9uaXRvclNyY0FnZW50IilbMF0uY2hlY2tlZCkgewogICAgICAgICAgICAgICAgZ19tb25pdG9yTGlzdGVuU3JjID0gJ2FnZW50JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGdfbW9uaXRvckxpc3RlblNyYyA9ICdtdXRlZCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdHJhY2UoYE1vbml0b3IgbGlzdGVucyB0bzogJHtnX21vbml0b3JMaXN0ZW5TcmN9YCk7CiAgICAgICAgfQoKICAgICAgICAkKCIjbW9uaXRvclNyY0NhbGxlciIpLm9uKCJjaGFuZ2UgY2xpY2siLCAoKSA9PiBtb25pdG9yU3JjQ2hhbmdlSGFuZGxlcigpKTsKICAgICAgICAkKCIjbW9uaXRvclNyY0FnZW50Iikub24oImNoYW5nZSBjbGljayIsICgpID0+IG1vbml0b3JTcmNDaGFuZ2VIYW5kbGVyKCkpOwogICAgICAgICQoIiNtb25pdG9yU3JjTXV0ZWQiKS5vbigiY2hhbmdlIGNsaWNrIiwgKCkgPT4gbW9uaXRvclNyY0NoYW5nZUhhbmRsZXIoKSk7CiAgICAgICAgbW9uaXRvclNyY0NoYW5nZUhhbmRsZXIoKTsKICAgIH0gZWxzZSB7CiAgICAgICAgLy8gV2UncmUgYSB2b2ljZWJvdAogICAgICAgIGNvbnN0IGJvdFNlbGVjdG9yID0gJCgnI2JvdFNlbGVjdG9yJyk7CiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBib3RTZWxlY3Rvci5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5kYXRhKCdwcm92aWRlcicpOwoKICAgICAgICBpZih0dHNuYW1lKSB7CiAgICAgICAgICAgIHNlcnZpY2VVcmkgKz0gYCYke1RUU19RVUVSWV9QQVJBTX09JHtlbmNvZGVVUklDb21wb25lbnQodHRzbmFtZSl9YDsKICAgICAgICB9CgogICAgICAgICQoJyNzdWdnZXN0aW9udGV4dCcpLnRleHQoJycpOwogICAgICAgICQoIiNzdWdnZXN0aW9ucGFuZWwiKS5oaWRlKCk7CiAgICAgICAgJCgiI21vbml0b3JTcmMiKS5oaWRlKCk7CgogICAgICAgIGZvcihjb25zdCBib3Qgb2YgKGdfYm90bGlzdC5kaWFsb2dib3RzIHx8IFtdKSkgewogICAgICAgICAgICBpZihib3QucHJvdmlkZXIgPT09IHByb3ZpZGVyKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjYXBzID0gYm90LmNhcGFiaWxpdGllcyB8fCB7fTsKCiAgICAgICAgICAgICAgICBpZihjYXBzLnRleHQpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjaW5wdXRUZXh0RmllbGQiKS5zaG93KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoY2Fwcy5kdG1mKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiI2lucHV0RHRtZktleXBhZCIpLnNob3coKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHRyYWNlKGBBc3NlbWJsZWQgc2VydmljZSBVUkk6IDwke3NlcnZpY2VVcml9PmApOwogICAgZGlhbG9nID0gbmV3IFZvaWNlRGlhbG9nQ2xpZW50KHNlcnZpY2VVcmksIGRpYWxvZ0NvbmZpZyk7CiAgICBnX2RpYWxvZyA9IGRpYWxvZzsKfSAvLyBzdGFydEJvdAoKZnVuY3Rpb24gc3RhcnRTZXNzaW9uKGJvdFBhcmFtZXRlcikgewogICAgLy8gQ2xvc2UgZXhpc3RpbmcgZ19kaWFsb2cgaWYgYW55LgogICAgaWYoZ19kaWFsb2cpIHsKICAgICAgICB0cmFjZShgRXhpc3RpbmcgZGlhbG9nICR7Z19kaWFsb2cuaWR9LCBjbG9zaW5nIGl0IWApOwogICAgICAgIGdfZGlhbG9nLmNsb3NlKCk7CiAgICAgICAgZ19kaWFsb2cgPSBudWxsOwogICAgfQoKICAgIC8vIFN0YXJ0IEJvdC4KICAgIHN0YXJ0Qm90KGJvdFBhcmFtZXRlci5ib3RJZCwgYm90UGFyYW1ldGVyLmJvdFZlcnNpb24pOwp9CgpmdW5jdGlvbiB0dHNFbmdpbmVMYW5ndWFnZU1hcHBpbmdTZWxlY3RvckNoYW5nZSgpIHsKICAgIGNvbnN0IHR0c0VuZ2luZUxhbmd1YWdlTWFwcGluZ1NlbGVjdG9yID0gJCgnI3R0c0VuZ2luZUxhbmd1YWdlTWFwcGluZ1NlbGVjdG9yJyk7CiAgICBjb25zdCBsYW5ndWFnZSA9IHR0c0VuZ2luZUxhbmd1YWdlTWFwcGluZ1NlbGVjdG9yLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmRhdGEoJ2xhbmd1YWdlJyk7CiAgICBjb25zb2xlLmxvZygnU2VsZWN0ZWQgbGFuZ3VhZ2U6ICcgKyBsYW5ndWFnZSk7CiAgICBpZiAobGFuZ3VhZ2UgPT09ICduZXcnKSB7CiAgICAgICAgYWRkTmV3VFRTRW5naW5lTGFuZ3VhZ2VNYXAoKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIHVwZGF0ZVRUU0VuZ2luZVZvaWNlKGxhbmd1YWdlKTsKICAgIH0KfQoKLy8gYWRkcyBvciB1cGRhdGVzIGV4aXN0aW5nIG1hcCB0byB0aGUgbWFwcGluZwpmdW5jdGlvbiBhZGROZXdUVFNFbmdpbmVMYW5ndWFnZU1hcCgpIHsKICAgICQoJyNuZXdUVFNFbmdpbmVMYW5ndWFnZU1hcE1vZGFsJykubW9kYWwoJ3Nob3cnKTsKICAgICQoJyNuZXdUVFNFbmdpbmVMYW5ndWFnZU1hcFN1Ym1pdCcpLmNsaWNrKCgpID0+IHsKICAgICAgICBpZiAoJCgiI25ld0xhbmd1YWdlIikudmFsKCkgPT09ICIiKSB7CiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgbGFuZ3VhZ2VNYXAgPSB7CiAgICAgICAgICAgIGxhbmd1YWdlOiAkKCcjbmV3TGFuZ3VhZ2UnKS52YWwoKSwKICAgICAgICAgICAgZW5naW5lSWQ6ICAkKCcjbmV3RW5naW5lSWQnKS52YWwoKSwKICAgICAgICAgICAgZGVmYXVsdFZvaWNlSWQ6ICAkKCcjbmV3RGVmYXVsdFZvaWNlSWQnKS52YWwoKQogICAgICAgIH0KCiAgICAgICAgLy91cGRhdGUgZXhpc3RpbmcgbGFuZ3VhZ2UKICAgICAgICBmb3IgKGxldCBnbGFuZ3VhZ2Ugb2YgKGdfdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nIHx8IFtdKSkgewogICAgICAgICAgICBpZiAoZ2xhbmd1YWdlLmxhbmd1YWdlID09PSAkKCcjbmV3TGFuZ3VhZ2UnKS52YWwoKSkgewogICAgICAgICAgICAgICAgZ2xhbmd1YWdlLmVuZ2luZUlkID0gJCgnI25ld0VuZ2luZUlkJykudmFsKCk7CiAgICAgICAgICAgICAgICBnbGFuZ3VhZ2UuZGVmYXVsdFZvaWNlSWQgPSAkKCcjbmV3RGVmYXVsdFZvaWNlSWQnKS52YWwoKTsKICAgICAgICAgICAgICAgIGNsZWFyTmV3VFRTRW5naW5lTGFuZ3VhZ2VNYXBNb2RhbCgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vYWRkIG5ldyBsYW5ndWFnZQogICAgICAgIGdfdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nLnB1c2gobGFuZ3VhZ2VNYXApOwogICAgICAgIGNsZWFyTmV3VFRTRW5naW5lTGFuZ3VhZ2VNYXBNb2RhbCgpOwogICAgfSk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZVRUU0VuZ2luZVZvaWNlKGxhbmd1YWdlKSB7CiAgICBmb3IgKGNvbnN0IGdsYW5ndWFnZSBvZiAoZ190dHNFbmdpbmVMYW5ndWFnZU1hcHBpbmcgfHwgW10pKSB7CiAgICAgICAgaWYgKGdsYW5ndWFnZS5sYW5ndWFnZSA9PT0gbGFuZ3VhZ2UpIHsKICAgICAgICAgICAgJCgnI3R0c0VuZ2luZUlkJykudmFsKGdsYW5ndWFnZS5lbmdpbmVJZCk7CiAgICAgICAgICAgICQoJyN2b2ljZUlkJykudmFsKGdsYW5ndWFnZS5kZWZhdWx0Vm9pY2VJZCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICAgICQoJyN0dHNFbmdpbmVSb3dJZCcpLnJlbW92ZUNsYXNzKCdkLW5vbmUnKTsKICAgICQoJyN2b2ljZVJvd0lkJykucmVtb3ZlQ2xhc3MoJ2Qtbm9uZScpOwogICAgY29uc3QgdHRzRW5naW5lSWQgPSAkKCcjdHRzRW5naW5lSWQnKTsKICAgIHR0c0VuZ2luZUlkLmZvY3VzKCk7CiAgICB0dHNFbmdpbmVJZC5zZWxlY3QoKTsKICAgICQoJyN0dHNFbmdpbmVMYW5ndWFnZU1hcFNhdmUnKS5jbGljaygoKSA9PiB7CiAgICAgICAgY29uc3QgdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nU2VsZWN0b3IgPSAkKCcjdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nU2VsZWN0b3InKTsKICAgICAgICBjb25zdCBsYW5ndWFnZSA9IHR0c0VuZ2luZUxhbmd1YWdlTWFwcGluZ1NlbGVjdG9yLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmRhdGEoJ2xhbmd1YWdlJyk7CiAgICAgICAgZm9yIChsZXQgZ2xhbmd1YWdlIG9mIChnX3R0c0VuZ2luZUxhbmd1YWdlTWFwcGluZyB8fCBbXSkpIHsKICAgICAgICAgICAgaWYgKGdsYW5ndWFnZS5sYW5ndWFnZSA9PT0gbGFuZ3VhZ2UpIHsKICAgICAgICAgICAgICAgIGdsYW5ndWFnZS5lbmdpbmVJZCA9ICQoJyN0dHNFbmdpbmVJZCcpLnZhbCgpOwogICAgICAgICAgICAgICAgZ2xhbmd1YWdlLmRlZmF1bHRWb2ljZUlkID0gJCgnI3ZvaWNlSWQnKS52YWwoKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRvYXN0ID0gJCgnI3RvYXN0Qm9keScpOwogICAgICAgICAgICAgICAgdG9hc3QuZW1wdHkoKTsKICAgICAgICAgICAgICAgIHRvYXN0LmFwcGVuZCgiU2F2ZWQgbGFuZ3VhZ2UgIiArIGxhbmd1YWdlKTsKICAgICAgICAgICAgICAgICQoJy50b2FzdCcpLnRvYXN0KCdzaG93Jyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfQoKZnVuY3Rpb24gY2xlYXJOZXdUVFNFbmdpbmVMYW5ndWFnZU1hcE1vZGFsKCkgewogICAgJCgnI25ld1RUU0VuZ2luZUxhbmd1YWdlTWFwTW9kYWwnKS5tb2RhbCgnaGlkZScpOwogICAgJCgnI25ld0xhbmd1YWdlJykudmFsKCIiKTsKICAgICQoJyNuZXdFbmdpbmVJZCcpLnZhbCgiIik7CiAgICAkKCcjbmV3RGVmYXVsdFZvaWNlSWQnKS52YWwoIiIpOwogICAgcmVmcmVzaFRUU0VuZ2luZUxhbmd1YWdlTWFwcGluZygpOwp9CgpmdW5jdGlvbiByZWZyZXNoVFRTRW5naW5lTGFuZ3VhZ2VNYXBwaW5nKCkgewogICAgY29uc3QgdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nU2VsZWN0b3IgPSAkKCcjdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nU2VsZWN0b3InKS5lbXB0eSgpOwogICAgdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nU2VsZWN0b3IuYXBwZW5kKCQoJzxvcHRpb24gc3R5bGU9ImRpc3BsYXk6bm9uZSIgZGlzYWJsZWQgc2VsZWN0ZWQgdmFsdWU+IFNlbGVjdCBhIGxhbmd1YWdlIDwvb3B0aW9uPiAnKSkKICAgIHR0c0VuZ2luZUxhbmd1YWdlTWFwcGluZ1NlbGVjdG9yLmFwcGVuZCgkKCc8b3B0aW9uPicsIHt2YWx1ZTogJ25ldycgfHwgJycsIHRleHQ6ICdBZGQgbmV3IGxhbmd1YWdlJyB8fCAnJywgJ2RhdGEtbGFuZ3VhZ2UnOiAnbmV3J30pKTsKICAgIGZvciAobGV0IGxhbmd1YWdlIG9mIChnX3R0c0VuZ2luZUxhbmd1YWdlTWFwcGluZyB8fCBbXSkpIHsKICAgICAgICBsZXQgaXRlbSA9ICQoJzxvcHRpb24+Jywge3ZhbHVlOiBsYW5ndWFnZS5sYW5ndWFnZSB8fCAnJywgdGV4dDogbGFuZ3VhZ2UubGFuZ3VhZ2UgfHwgJycsICdkYXRhLWxhbmd1YWdlJzogbGFuZ3VhZ2UubGFuZ3VhZ2UgfHwgJyd9KTsKICAgICAgICB0dHNFbmdpbmVMYW5ndWFnZU1hcHBpbmdTZWxlY3Rvci5hcHBlbmQoaXRlbSk7CiAgICB9CiAgICAkKCcjdHRzRW5naW5lUm93SWQnKS5hZGRDbGFzcygnZC1ub25lJyk7CiAgICAkKCcjdm9pY2VSb3dJZCcpLmFkZENsYXNzKCdkLW5vbmUnKTsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVUVFNFbmdpbmVMYW5ndWFnZU1hcHBpbmdKc29uKCkgewogICAgbGV0IGpzb24gPSB7fTsKICAgIGZvciAobGV0IGxhbmd1YWdlIG9mIChnX3R0c0VuZ2luZUxhbmd1YWdlTWFwcGluZyB8fCBbXSkpIHsKICAgICAgICBsZXQgdHRzVm9pY2UgPSB7ZW5naW5lSWQgOiBsYW5ndWFnZS5lbmdpbmVJZCwgZGVmYXVsdFZvaWNlSWQ6IGxhbmd1YWdlLmRlZmF1bHRWb2ljZUlkfTsKICAgICAgICBqc29uW2xhbmd1YWdlLmxhbmd1YWdlXSA9IHR0c1ZvaWNlOwogICAgfQogICAgcmV0dXJuIGpzb247Cn0KCmZ1bmN0aW9uIHVwZGF0ZUJvdFBhcmFtZXRlcnMoKSB7CiAgICBjb25zdCBib3RTZWxlY3RvciA9ICQoJyNib3RTZWxlY3RvcicpOwogICAgY29uc3QgcHJvdmlkZXIgPSBib3RTZWxlY3Rvci5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5kYXRhKCdwcm92aWRlcicpOwoKICAgIHN3aXRjaCAocHJvdmlkZXIpIHsKICAgICAgICBjYXNlIERJQUxPR0ZMT1dfUFJPVklERVI6CiAgICAgICAgICAgICQoJyNkaWFsb2dmbG93UGFyYW1ldGVycycpLnNob3coKTsKICAgICAgICAgICAgJCgnI2RpYWxvZ0VuZ2luZVBhcmFtZXRlcnMnKS5oaWRlKCk7CgogICAgICAgICAgICBjb25zdCBwcm9qZWN0SWRFbCA9ICQoJyNkaWFsb2dmbG93UHJvamVjdElkJyk7CgogICAgICAgICAgICBwcm9qZWN0SWRFbC5mb2N1cygpOwogICAgICAgICAgICBwcm9qZWN0SWRFbC5zZWxlY3QoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBESUFMT0dFTkdJTkVfUFJPVklERVI6CiAgICAgICAgICAgICQoJyNkaWFsb2dmbG93UGFyYW1ldGVycycpLmhpZGUoKTsKICAgICAgICAgICAgJCgnI2RpYWxvZ0VuZ2luZVBhcmFtZXRlcnMnKS5zaG93KCk7CgogICAgICAgICAgICBjb25zdCBib3RJZEVsID0gJCgnI2RpYWxvZ0VuZ2luZUJvdElkJyk7CgogICAgICAgICAgICBib3RJZEVsLmZvY3VzKCk7CiAgICAgICAgICAgIGJvdElkRWwuc2VsZWN0KCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgfQp9CgpmdW5jdGlvbiBzZWxlY3RPcmdhbml6YXRpb24oaXRlbSkgewogICAgJCgnI29yZ2FuaXphdGlvbklkJykudmFsKGl0ZW0pOwogICAgJCgnI29yZ2FuaXphdGlvbnNNcnVNb2RhbCcpLm1vZGFsKCdoaWRlJyk7Cn0KCmZ1bmN0aW9uIHNlbGVjdEJvdEludGVncmF0aW9uKGl0ZW0pIHsKICAgICQoJyNib3RJbnRlZ3JhdGlvbklkJykudmFsKGl0ZW0pOwogICAgJCgnI2JvdEludGVncmF0aW9uc01ydU1vZGFsJykubW9kYWwoJ2hpZGUnKTsKfQoKZnVuY3Rpb24gc2VsZWN0Qm90KGl0ZW0pIHsKICAgIGNvbnN0IGJvdFNlbGVjdG9yID0gJCgnI2JvdFNlbGVjdG9yJyk7CgogICAgYm90U2VsZWN0b3IudmFsKGl0ZW0ucHJvdmlkZXIpOwogICAgdXBkYXRlQm90UGFyYW1ldGVycygpOwoKICAgIHN3aXRjaCAoaXRlbS5wcm92aWRlcikgewogICAgICAgIGNhc2UgRElBTE9HRkxPV19QUk9WSURFUjoKICAgICAgICAgICAgJCgnI2RpYWxvZ2Zsb3dQcm9qZWN0SWQnKS52YWwoaXRlbS5kaWFsb2dmbG93UHJvamVjdElkKTsKICAgICAgICAgICAgJCgnI2RpYWxvZ2Zsb3dFbnZpcm9ubWVudCcpLnZhbChpdGVtLmRpYWxvZ2Zsb3dFbnZpcm9ubWVudCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgRElBTE9HRU5HSU5FX1BST1ZJREVSOgogICAgICAgICAgICAkKCcjZGlhbG9nRW5naW5lQm90SWQnKS52YWwoaXRlbS5kaWFsb2dFbmdpbmVCb3RJZCk7CiAgICAgICAgICAgICQoJyNkaWFsb2dFbmdpbmVCb3RWZXJzaW9uJykudmFsKGl0ZW0uZGlhbG9nRW5naW5lQm90VmVyc2lvbik7CiAgICAgICAgICAgIGJyZWFrOwogICAgfQoKICAgICQoJyNib3RzTXJ1TW9kYWwnKS5tb2RhbCgnaGlkZScpOwp9CgpmdW5jdGlvbiBzYXZlTXJ1cygpIHsKICAgIHNhdmVPcmdhbml6YXRpb25zTXJ1KCk7CiAgICBzYXZlQm90SW50ZWdyYXRpb25zTXJ1KCk7CiAgICBzYXZlQm90c01ydSgpOwp9CgpmdW5jdGlvbiBzYXZlT3JnYW5pemF0aW9uc01ydSgpIHsKICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gJCgnI29yZ2FuaXphdGlvbklkJykudmFsKCk7CgogICAgaWYgKCFfLmlzRW1wdHkob3JnYW5pemF0aW9uSWQpKSB7CiAgICAgICAgc2F2ZU9yZ2FuaXphdGlvbihvcmdhbml6YXRpb25JZCk7CiAgICB9Cn0KCmZ1bmN0aW9uIHNhdmVCb3RJbnRlZ3JhdGlvbnNNcnUoKSB7CiAgICBjb25zdCBib3RJbnRlZ3JhdGlvbklkID0gJCgnI2JvdEludGVncmF0aW9uSWQnKS52YWwoKTsKCiAgICBpZiAoIV8uaXNFbXB0eShib3RJbnRlZ3JhdGlvbklkKSkgewogICAgICAgIHNhdmVCb3RJbnRlZ3JhdGlvbihib3RJbnRlZ3JhdGlvbklkKTsKICAgIH0KfQoKZnVuY3Rpb24gc2F2ZUJvdHNNcnUoKSB7CiAgICBjb25zdCBib3RTZWxlY3RvciA9ICQoJyNib3RTZWxlY3RvcicpOwogICAgY29uc3QgcHJvdmlkZXIgPSBib3RTZWxlY3Rvci5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5kYXRhKCdwcm92aWRlcicpOwoKICAgIHN3aXRjaCAocHJvdmlkZXIpIHsKICAgICAgICBjYXNlIERJQUxPR0ZMT1dfUFJPVklERVI6CiAgICAgICAgICAgIGxldCBkaWFsb2dmbG93UHJvamVjdElkID0gJCgnI2RpYWxvZ2Zsb3dQcm9qZWN0SWQnKS52YWwoKTsKICAgICAgICAgICAgbGV0IGRpYWxvZ2Zsb3dFbnZpcm9ubWVudCA9ICQoJyNkaWFsb2dmbG93RW52aXJvbm1lbnQnKS52YWwoKTsKCiAgICAgICAgICAgIHNhdmVCb3QoewogICAgICAgICAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLAogICAgICAgICAgICAgICAgZGlhbG9nZmxvd1Byb2plY3RJZCwKICAgICAgICAgICAgICAgIGRpYWxvZ2Zsb3dFbnZpcm9ubWVudAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBESUFMT0dFTkdJTkVfUFJPVklERVI6CiAgICAgICAgICAgIGxldCBkaWFsb2dFbmdpbmVCb3RJZCA9ICQoJyNkaWFsb2dFbmdpbmVCb3RJZCcpLnZhbCgpOwogICAgICAgICAgICBsZXQgZGlhbG9nRW5naW5lQm90VmVyc2lvbiA9ICQoJyNkaWFsb2dFbmdpbmVCb3RWZXJzaW9uJykudmFsKCk7CgogICAgICAgICAgICBzYXZlQm90KHsKICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlciwKICAgICAgICAgICAgICAgIGRpYWxvZ0VuZ2luZUJvdElkLAogICAgICAgICAgICAgICAgZGlhbG9nRW5naW5lQm90VmVyc2lvbgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYnJlYWs7CiAgICB9Cn0KCmZ1bmN0aW9uIHJlZnJlc2hNcnVzKCkgewogICAgcmVmcmVzaE9yZ2FuaXphdGlvbnNNcnUoKTsKICAgIHJlZnJlc2hCb3RJbnRlZ3JhdGlvbnNNcnUoKTsKICAgIHJlZnJlc2hCb3RzTXJ1KCk7Cn0KCmZ1bmN0aW9uIHJlZnJlc2hPcmdhbml6YXRpb25zTXJ1KCkgewogICAgY29uc3Qgb3JnYW5pemF0aW9ucyA9IGdldE9yZ2FuaXphdGlvbnMoKTsKICAgIGNvbnN0IG9yZ2FuaXphdGlvbnNNcnUgPSAkKCcjb3JnYW5pemF0aW9uc01ydScpOwoKICAgIG9yZ2FuaXphdGlvbnNNcnUuaHRtbCgnJyk7CiAgICAkKCcjb3JnYW5pemF0aW9ucycpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7CgogICAgaWYgKCFfLmlzRW1wdHkob3JnYW5pemF0aW9ucykgJiYgIV8uaXNFbXB0eShvcmdhbml6YXRpb25zLml0ZW1zKSkgewogICAgICAgIGxldCBmaXJzdCA9IHRydWU7CiAgICAgICAgbGV0IGh0bWwgPSAnJzsKICAgICAgICBsZXQgaW5kZXggPSAwOwoKICAgICAgICAkKCcjb3JnYW5pemF0aW9ucycpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7CgogICAgICAgIG9yZ2FuaXphdGlvbnMuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICBpZiAoIWZpcnN0KSB7CiAgICAgICAgICAgICAgICBodG1sICs9ICI8aHIgc3R5bGU9J2NsZWFyOmJvdGg7JyAvPiI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7CiAgICAgICAgICAgIGh0bWwgKz0gIjxkaXYgY2xhc3M9J3Jvdyc+IjsKICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBpZD0nb3JnJHtpbmRleH0nIGNsYXNzPSdjb2wtMTEnIHN0eWxlPSdjdXJzb3I6cG9pbnRlcjtmbG9hdDpsZWZ0Oyc+YDsKICAgICAgICAgICAgaHRtbCArPSBgPGRpdj4ke2l0ZW19PC9kaXY+YDsKICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKCiAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgaWQ9J29yZ1JlbW92ZSR7aW5kZXh9JyBjbGFzcz0nY29sLTEnIHN0eWxlPSdjdXJzb3I6cG9pbnRlcjtmbG9hdDpyaWdodDsnPmA7CiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+WDwvZGl2Pic7CiAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2PjwvZGl2Pic7CiAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgfSk7CgogICAgICAgIG9yZ2FuaXphdGlvbnNNcnUuaHRtbChodG1sKTsKICAgICAgICBpbmRleCA9IDA7CgogICAgICAgIG9yZ2FuaXphdGlvbnMuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICAkKGAjb3JnJHtpbmRleH1gKS5jbGljaygoKSA9PiBzZWxlY3RPcmdhbml6YXRpb24oaXRlbSkpOwogICAgICAgICAgICAkKGAjb3JnUmVtb3ZlJHtpbmRleH1gKS5jbGljaygoKSA9PiB7CiAgICAgICAgICAgICAgICByZW1vdmVPcmdhbml6YXRpb24oaXRlbSk7CiAgICAgICAgICAgICAgICByZWZyZXNoT3JnYW5pemF0aW9uc01ydSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaW5kZXgrKwogICAgICAgIH0pOwogICAgfQp9CgpmdW5jdGlvbiByZWZyZXNoQm90SW50ZWdyYXRpb25zTXJ1KCkgewogICAgY29uc3QgYm90SW50ZWdyYXRpb25zID0gZ2V0Qm90SW50ZWdyYXRpb25zKCk7CiAgICBjb25zdCBib3RJbnRlZ3JhdGlvbnNNcnUgPSAkKCcjYm90SW50ZWdyYXRpb25zTXJ1Jyk7CgogICAgYm90SW50ZWdyYXRpb25zTXJ1Lmh0bWwoJycpOwogICAgJCgnI2JvdEludGVncmF0aW9ucycpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7CgogICAgaWYgKCFfLmlzRW1wdHkoYm90SW50ZWdyYXRpb25zKSAmJiAhXy5pc0VtcHR5KGJvdEludGVncmF0aW9ucy5pdGVtcykpIHsKICAgICAgICBsZXQgZmlyc3QgPSB0cnVlOwogICAgICAgIGxldCBodG1sID0gJyc7CiAgICAgICAgbGV0IGluZGV4ID0gMDsKCiAgICAgICAgJCgnI2JvdEludGVncmF0aW9ucycpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7CgogICAgICAgIGJvdEludGVncmF0aW9ucy5pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgIGlmICghZmlyc3QpIHsKICAgICAgICAgICAgICAgIGh0bWwgKz0gIjxociBzdHlsZT0nY2xlYXI6Ym90aDsnIC8+IjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTsKICAgICAgICAgICAgaHRtbCArPSAiPGRpdiBjbGFzcz0ncm93Jz4iOwogICAgICAgICAgICBodG1sICs9IGA8ZGl2IGlkPSdib3RJbnQke2luZGV4fScgY2xhc3M9J2NvbC0xMScgc3R5bGU9J2N1cnNvcjpwb2ludGVyO2Zsb2F0OmxlZnQ7Jz5gOwogICAgICAgICAgICBodG1sICs9IGA8ZGl2PiR7aXRlbX08L2Rpdj5gOwogICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwoKICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBpZD0nYm90SW50UmVtb3ZlJHtpbmRleH0nIGNsYXNzPSdjb2wtMScgc3R5bGU9J2N1cnNvcjpwb2ludGVyO2Zsb2F0OnJpZ2h0Oyc+YDsKICAgICAgICAgICAgaHRtbCArPSAnPGRpdj5YPC9kaXY+JzsKICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+PC9kaXY+JzsKICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICB9KTsKCiAgICAgICAgYm90SW50ZWdyYXRpb25zTXJ1Lmh0bWwoaHRtbCk7CiAgICAgICAgaW5kZXggPSAwOwoKICAgICAgICBib3RJbnRlZ3JhdGlvbnMuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICAkKGAjYm90SW50JHtpbmRleH1gKS5jbGljaygoKSA9PiBzZWxlY3RCb3RJbnRlZ3JhdGlvbihpdGVtKSk7CiAgICAgICAgICAgICQoYCNib3RJbnRSZW1vdmUke2luZGV4fWApLmNsaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgIHJlbW92ZUJvdEludGVncmF0aW9uKGl0ZW0pOwogICAgICAgICAgICAgICAgcmVmcmVzaEJvdEludGVncmF0aW9uc01ydSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaW5kZXgrKwogICAgICAgIH0pOwogICAgfQp9CgpmdW5jdGlvbiByZWZyZXNoQm90c01ydSgpIHsKICAgIGNvbnN0IGJvdHMgPSBnZXRCb3RzKCk7CiAgICBjb25zdCBib3RzTXJ1ID0gJCgnI2JvdHNNcnUnKTsKCiAgICBib3RzTXJ1Lmh0bWwoJycpOwogICAgJCgnI2JvdHMnKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpOwoKICAgIGlmICghXy5pc0VtcHR5KGJvdHMpICYmICFfLmlzRW1wdHkoYm90cy5pdGVtcykpIHsKICAgICAgICBsZXQgZmlyc3QgPSB0cnVlOwogICAgICAgIGxldCBodG1sID0gJyc7CiAgICAgICAgbGV0IGluZGV4ID0gMDsKCiAgICAgICAgJCgnI2JvdHMnKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpOwoKICAgICAgICBib3RzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgICAgaWYgKCFmaXJzdCkgewogICAgICAgICAgICAgICAgaHRtbCArPSAiPGhyIHN0eWxlPSdjbGVhcjpib3RoOycgLz4iOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmaXJzdCA9IGZhbHNlOwogICAgICAgICAgICBodG1sICs9ICI8ZGl2IGNsYXNzPSdyb3cnPiI7CgogICAgICAgICAgICBzd2l0Y2ggKGl0ZW0ucHJvdmlkZXIpIHsKICAgICAgICAgICAgICAgIGNhc2UgRElBTE9HRkxPV19QUk9WSURFUjoKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8ZGl2IGNsYXNzPSdjb2wtMTEnPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGg1PkRpYWxvZ2Zsb3c8L2g1Pic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBpZD0nYm90JHtpbmRleH0nIHN0eWxlPSdjdXJzb3I6cG9pbnRlcjsnPmA7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdj48Yj5Qcm9qZWN0SWQ6PC9iPiAke2l0ZW0uZGlhbG9nZmxvd1Byb2plY3RJZH08L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXY+PGI+RW52aXJvbm1lbnQ6PC9iPiAke2l0ZW0uZGlhbG9nZmxvd0Vudmlyb25tZW50fTwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+PC9kaXY+JzsKCiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBpZD0nYm90UmVtb3ZlJHtpbmRleH0nIHN0eWxlPSdjdXJzb3I6cG9pbnRlcjsnIGNsYXNzPSdjb2wtMSc+YDsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2Plg8L2Rpdj4nOwogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIERJQUxPR0VOR0lORV9QUk9WSURFUjoKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8ZGl2IGNsYXNzPSdjb2wtMTEnPiI7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGg1PkRpYWxvZyBFbmdpbmU8L2g1Pic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBpZD0nYm90JHtpbmRleH0nIHN0eWxlPSdjdXJzb3I6cG9pbnRlcjsnPmA7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdj48Yj5Cb3QgSUQ6PC9iPiAke2l0ZW0uZGlhbG9nRW5naW5lQm90SWR9PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2PjxiPkJvdCBWZXJzaW9uOjwvYj4gJHtpdGVtLmRpYWxvZ0VuZ2luZUJvdFZlcnNpb259PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj48L2Rpdj4nOwoKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGlkPSdib3RSZW1vdmUke2luZGV4fScgc3R5bGU9J2N1cnNvcjpwb2ludGVyOycgY2xhc3M9J2NvbC0xJz5gOwogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+WDwvZGl2Pic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICB9KTsKCiAgICAgICAgYm90c01ydS5odG1sKGh0bWwpOwogICAgICAgIGluZGV4ID0gMDsKCiAgICAgICAgYm90cy5pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgICQoYCNib3Qke2luZGV4fWApLmNsaWNrKCgpID0+IHNlbGVjdEJvdChpdGVtKSk7CiAgICAgICAgICAgICQoYCNib3RSZW1vdmUke2luZGV4fWApLmNsaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgIHJlbW92ZUJvdChpdGVtKTsKICAgICAgICAgICAgICAgIHJlZnJlc2hCb3RzTXJ1KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpbmRleCsrCiAgICAgICAgfSk7CiAgICB9Cn0KCmZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpIHsKICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnJzsKCiAgICBpZiAoXy5pc0VtcHR5KCQoJyNvcmdhbml6YXRpb25JZCcpLnZhbCgpKSkgewogICAgICAgIGlmICghXy5pc0VtcHR5KGVycm9yTWVzc2FnZSkpIHsKICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9ICc8YnIgLz4nOwogICAgICAgIH0KCiAgICAgICAgZXJyb3JNZXNzYWdlICs9ICdPcmdhbml6YXRpb25JZCBpcyByZXF1aXJlZC4nOwogICAgfQoKICAgIGlmIChfLmlzRW1wdHkoJCgnI2JvdEludGVncmF0aW9uSWQnKS52YWwoKSkpIHsKICAgICAgICBpZiAoIV8uaXNFbXB0eShlcnJvck1lc3NhZ2UpKSB7CiAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPSAnPGJyIC8+JzsKICAgICAgICB9CgogICAgICAgIGVycm9yTWVzc2FnZSArPSAnQm90IEludGVncmF0aW9uSWQgaXMgcmVxdWlyZWQuJzsKICAgIH0KCiAgICBjb25zdCBib3RTZWxlY3RvciA9ICQoJyNib3RTZWxlY3RvcicpOwogICAgY29uc3QgcHJvdmlkZXIgPSBib3RTZWxlY3Rvci5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5kYXRhKCdwcm92aWRlcicpOwoKICAgIHN3aXRjaCAocHJvdmlkZXIpIHsKICAgICAgICBjYXNlIERJQUxPR0ZMT1dfUFJPVklERVI6CiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkoJCgnI2RpYWxvZ2Zsb3dQcm9qZWN0SWQnKS52YWwoKSkpIHsKICAgICAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KGVycm9yTWVzc2FnZSkpIHsKICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gJzxiciAvPic7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9ICdQcm9qZWN0IElEIGlzIHJlcXVpcmVkLic7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgRElBTE9HRU5HSU5FX1BST1ZJREVSOgogICAgICAgICAgICBpZiAoXy5pc0VtcHR5KCQoJyNkaWFsb2dFbmdpbmVCb3RJZCcpLnZhbCgpKSkgewogICAgICAgICAgICAgICAgaWYgKCFfLmlzRW1wdHkoZXJyb3JNZXNzYWdlKSkgewogICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPSAnPGJyIC8+JzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gJ0JvdCBJRCBpcyByZXF1aXJlZC4nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoXy5pc0VtcHR5KCQoJyNkaWFsb2dFbmdpbmVCb3RWZXJzaW9uJykudmFsKCkpKSB7CiAgICAgICAgICAgICAgICBpZiAoIV8uaXNFbXB0eShlcnJvck1lc3NhZ2UpKSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9ICc8YnIgLz4nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPSAnQm90IFZlcnNpb24gaXMgcmVxdWlyZWQuJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CiAgICB9CgogICAgY29uc3QgcmV0VmFsID0gXy5pc0VtcHR5KGVycm9yTWVzc2FnZSk7CgogICAgaWYgKCFyZXRWYWwpIHsKICAgICAgICAkKCcjZXJyb3JNZXNzYWdlJykuaHRtbChlcnJvck1lc3NhZ2UpOwogICAgICAgICQoJyNlcnJvck1lc3NhZ2VDb250YWluZXInKS5zaG93KCk7CiAgICB9CgogICAgcmV0dXJuIHJldFZhbDsKfQoKZnVuY3Rpb24gZ2V0Qm90UGFyYW1ldGVyKCkgewogICAgY29uc3QgYm90U2VsZWN0b3IgPSAkKCcjYm90U2VsZWN0b3InKTsKICAgIGNvbnN0IHByb3ZpZGVyID0gYm90U2VsZWN0b3IuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykuZGF0YSgncHJvdmlkZXInKTsKICAgIHN3aXRjaCAocHJvdmlkZXIpIHsKICAgICAgICBjYXNlIERJQUxPR0ZMT1dfUFJPVklERVI6IHsKICAgICAgICAgICAgY29uc3QgYm90SWQgPSAkKCcjZGlhbG9nZmxvd1Byb2plY3RJZCcpLnZhbCgpOwogICAgICAgICAgICBjb25zdCBib3RWZXJzaW9uID0gJCgnI2RpYWxvZ2Zsb3dFbnZpcm9ubWVudCcpLnZhbCgpIHx8IERJQUxPR0ZMT1dfREVGQVVMVF9FTlZJUk9OTUVOVDsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGJvdElkLAogICAgICAgICAgICAgICAgYm90VmVyc2lvbgogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBjYXNlIERJQUxPR0VOR0lORV9QUk9WSURFUjogewogICAgICAgICAgICBjb25zdCBib3RJZCA9ICQoJyNkaWFsb2dFbmdpbmVCb3RJZCcpLnZhbCgpOwogICAgICAgICAgICBjb25zdCBib3RWZXJzaW9uID0gJCgnI2RpYWxvZ0VuZ2luZUJvdFZlcnNpb24nKS52YWwoKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGJvdElkLAogICAgICAgICAgICAgICAgYm90VmVyc2lvbgogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0cmFjZShgRXJyb3IgaW5pdGlhbGl6aW5nIGF1ZGlvIHN0cmVhbTogJHtlcnJ9YCk7CiAgICAgICAgICAgICQoJyNlcnJvck1lc3NhZ2UnKS50ZXh0KCdObyBCb3QgaXMgc2VsZWN0ZWQhJyk7CiAgICAgICAgICAgICQoJyNlcnJvck1lc3NhZ2VDb250YWluZXInKS5zaG93KCk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgfQp9CgpmdW5jdGlvbiBnZXRMb2NhbExRQXV0aG9yaXplZFVSTCh1cmwpIHsKICAgIGNvbnN0IGxvY2FsaG9zdFVSTCA9IG5ldyBVUkwodXJsKTsKICAgIGxvY2FsaG9zdFVSTC5ob3N0bmFtZSA9IGRvY3VtZW50LmRvbWFpbjsKICAgIGxvY2FsaG9zdFVSTC5wb3J0ID0gJzgwODAnOwogICAgbG9jYWxob3N0VVJMLnByb3RvY29sID0gYCR7KGxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JykgPyAnd3NzOicgOiAnd3M6J31gOwogICAgcmV0dXJuIGxvY2FsaG9zdFVSTC50b1N0cmluZygpOwp9CgpmdW5jdGlvbiBpc0xvY2FsKCkgewogICAgcmV0dXJuIGxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyAmJiAhJCgnI2Nvbm5lY3RUb0RDQScpLmlzKCc6Y2hlY2tlZCcpOwp9CgpmdW5jdGlvbiBnZXRMUUVuZFBvaW50VVJMKHVybCkgewogICAgaWYgKGlzTG9jYWwoKSkgewogICAgICAgcmV0dXJuIGdldExvY2FsTFFBdXRob3JpemVkVVJMKHVybCk7CiAgICB9CiAgICByZXR1cm4gdXJsOwp9CgovLwovLyBJbnZva2UgdGhlIGZ1bmN0aW9uIG9ubHkgb25jZSB3aGVuIERPTSBpcyByZWFkeS4KLy8KLy8gMS4gUG9seWZpbGwgZ2V0VXNlck1lZGlhLgovLyAyLiBJbnN0YW50aWF0ZSBBdWRpb0NvbnRleHQuCi8vIDMuIEluc3RhbnRpYXRlIG1lZGlhU3RyZWFtU291cmNlIGFuZCBzY3JpcHRQcm9jZXNzb3IuCi8vICAgICAtPiBTZXQgdGhlIHNjcmlwdFByb2Nlc3NvciB3aXRoIHRoZSBBdWRpb0NvbnRleHQgZGVzdGluYXRpb24gYW5kIHNldCB0aGUgbWVkaWFTdHJlYW1Tb3VyY2Ugd2l0aCB0aGUgc2NyaXB0UHJvY2Vzc29yLgovLyA0LiBJbnN0YW50aWF0ZSBSZXNhbXBsZXIuCi8vICAgICAtPiBDb25maWd1cmUgdGhlIG9uYXVkaW9wcm9jZXNzIGNhbGxiYWNrIHdpdGggdGhlIFJlc2FtcGxlciBpbnN0YW5jZS4KLy8KZnVuY3Rpb24gaW5pdGlhbGl6ZUF1ZGlvU3RyZWFtKCkgewogICAgbGV0IHJlU2FtcGxlciA9IG51bGw7CiAgICBsZXQgc2NyaXB0UHJvY2Vzc29yID0gbnVsbDsKICAgIGxldCBtZWRpYVN0cmVhbVNvdXJjZSA9IG51bGw7CgogICAgdHJ5IHsKICAgICAgICAvLyBQb2x5ZmlsbCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSBmb3IgY29uc2lzdGVudCBpbnRlcmZhY2UKICAgICAgICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7fTsKICAgICAgICB9CgogICAgICAgIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGdfc3VwcG9ydHNHZXRVc2VyTWVkaWEgPSAhIShuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3IubXNHZXRVc2VyTWVkaWEpOwogICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IChjb25zdHJhaW50cykgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLmdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLm1zR2V0VXNlck1lZGlhOwoKICAgICAgICAgICAgICAgIGlmICghZ2V0VXNlck1lZGlhKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gTm90IHN1cHBvcnRlZCBieSBicm93c2VyLCByZWplY3QhCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignZ2V0VXNlck1lZGlhIGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGlzIGJyb3dzZXInKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICAgICAgICBnZXRVc2VyTWVkaWEuY2FsbChuYXZpZ2F0b3IsIGNvbnN0cmFpbnRzLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBnX3N1cHBvcnRzR2V0VXNlck1lZGlhID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIC8vIEluc3RhbnRpYXRlIEF1ZGlvQ29udGV4dC4KICAgICAgICBjb25zdCBBdWRpb0NvbnRleHRDbGFzcyA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKICAgICAgICBnX2F1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHRDbGFzcygpOwoKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIHRyYWNlKGBFcnJvciBvbiBnZXRVc2VyTWVkaWEgUG9seWZpbGwgb3IgQXVkaW9Db250ZXh0OiAke2Vycn1gKTsKICAgIH0KCiAgICAvLyBTdGFydCBhdWRpbyBzdHJlYW0gdG8gc2VydmVyCiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IGF1ZGlvOiB0cnVlLCB2aWRlbzogZmFsc2UgfSkKICAgICAgICAudGhlbigoc3RyZWFtKSA9PiB7CiAgICAgICAgICAgIHRyYWNlKGBTdHJlYW0gaW5pdGlhbGl6ZWQ6ICR7SlNPTi5zdHJpbmdpZnkoc3RyZWFtKX1gKTsKCiAgICAgICAgICAgIG1lZGlhU3RyZWFtU291cmNlID0gZ19hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKTsKICAgICAgICAgICAgc2NyaXB0UHJvY2Vzc29yID0gZ19hdWRpb0NvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKGdfYXVkaW9CdWZmZXJTaXplLCAxLCAxKTsKCiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSByZXNhbXBsZXIgd2UncmUgdXNpbmcgaGVyZSBpcyBhIGJpdCBzaW1wbGlzdGljIGFuZCBkb2Vzbid0IGRvZXMgbm90IGhhdmUKICAgICAgICAgICAgLy8gYW4gYW50aWFsaWFzaW5nIGZpbHRlciBmb3IgZG93bnNhbXBsaW5nLiBJdCdzIHByb2JhYmx5IE9LIHRvIGRvd25zYW1wbGUgdG8gMTZrSHoKICAgICAgICAgICAgLy8gYXMgdGhlcmUgc2hvdWxkIGJlIHZlcnkgbGl0dGxlIGVuZXJneSBpbiBoaWdoZXIgYmFuZHMgZm9yIHNwZWVjaCBhbmQgdGhlIEFTUgogICAgICAgICAgICAvLyBlbmdpbmUgc2hvdWxkIGJlIGFibGUgdG8gZGVhbCB3aXRoIGEgYml0IG1vcmUgbm9pc2UuCiAgICAgICAgICAgIC8vIFRPRE86IEJ1aWxkIGJldHRlciByZXNhbXBsZXIgKHBvbHlwaGFzZS93aW5kb3dlZCBzaW5jIGludGVycG9sYXRvcikgb3IgYWRkIGEgbG93cGFzcyBmaWx0ZXIuCiAgICAgICAgICAgIGlmICghcmVTYW1wbGVyKSB7CiAgICAgICAgICAgICAgICByZVNhbXBsZXIgPSBuZXcgUmVzYW1wbGVyKGdfYXVkaW9Db250ZXh0LnNhbXBsZVJhdGUsIGdfdGFyZ2V0U2FtcGxlUmF0ZSwgMSwgbmV3IEZsb2F0MzJBcnJheShnX2F1ZGlvQnVmZmVyU2l6ZSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzY3JpcHRQcm9jZXNzb3Iub25hdWRpb3Byb2Nlc3MgPSAoZXZlbnQpID0+IHsKICAgICAgICAgICAgICAgIC8vIERvd25zYW1wbGUgYW5kIGVuY29kZSBhdWRpbyBhcyBjb25maWd1cmVkCiAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsRGF0YSA9IGV2ZW50LmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKDApOwoKICAgICAgICAgICAgICAgIHJlU2FtcGxlci5pbnB1dEJ1ZmZlci5zZXQoY2hhbm5lbERhdGEpOwoKICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dFNpemUgPSByZVNhbXBsZXIucmVzYW1wbGVyKGNoYW5uZWxEYXRhLmxlbmd0aCk7CiAgICAgICAgICAgICAgICBsZXQgZGF0YTsKCiAgICAgICAgICAgICAgICAvLyBUT0RPOiAgUmVtb3ZlZCBieSBLZXZpblcgc28gd2UgY2FuIHRlc3QgYmFyZ2UtaW4gc3VwcG9ydC4KICAgICAgICAgICAgICAgIC8vaWYoZ19wbGF5aW5nU291cmNlKSB7CiAgICAgICAgICAgICAgICAvLyAgICAvLyBIQUNLOiBXaGlsZSBhdWRpbyBwbGF5ZXIgaXMgcGxheWluZywgcmVwbGFjZSBhdWRpbyB3aXRoIHNpbGVuY2UKICAgICAgICAgICAgICAgIC8vICAgIC8vIFRvbyBtYW55IGVjaG8gcHJvYmxlbXMgd2l0aCBDaHJvbWUsIGRvbid0IGFsbG93IGJhcmdlLWluLgogICAgICAgICAgICAgICAgLy8gICAgZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkob3V0cHV0U2l6ZSk7CiAgICAgICAgICAgICAgICAvL30gZWxzZSB7CiAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEZsb2F0MzJBcnJheShyZVNhbXBsZXIub3V0cHV0QnVmZmVyLmJ1ZmZlciwgcmVTYW1wbGVyLm91dHB1dEJ1ZmZlci5ieXRlT2Zmc2V0LCBvdXRwdXRTaXplKTsKICAgICAgICAgICAgICAgIC8vfQoKICAgICAgICAgICAgICAgIGlmIChnX2RpYWxvZykgewogICAgICAgICAgICAgICAgICAgIGlmIChnX2RpYWxvZy5hdWRpb1BhcmFtZXRlci5jaGFubmVscyA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjMSA9IChnX21vbml0b3JMaXN0ZW5TcmMgPT09ICdjYWxsZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYzIgPSAoZ19tb25pdG9yTGlzdGVuU3JjID09PSAnYWdlbnQnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnX2Zvcm1hdCA9PT0gJ1BDTVUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gZGF0YS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bGF3ID0gbmV3IFVpbnQ4QXJyYXkoMiAqIHNpemUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBzaXplOyArK2kpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gdWxhd0VuY29kZVNhbXBsZShkYXRhW2ldICogMzI3NjgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bGF3WzIgKiBpXSA9IGMxID8gdyA6IDB4ZmY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWxhd1syICogaSArIDFdID0gYzIgPyB3IDogMHhmZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnX2RpYWxvZy5zZW5kQXVkaW8odWxhdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRvIExpbmVhci0xNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IGRhdGEubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbDE2ID0gbmV3IEludDE2QXJyYXkoMiAqIHNpemUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBzaXplOyArK2kpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gZGF0YVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gKHYgPCAtMS4wKSA/IC0zMjc2OCA6ICgodiA+IDEuMCkgPyAzMjc2NyA6IHYgKiAzMjc2Nyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwxNlsyICogaV0gPSBjMSA/IHcgOiAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwxNVsyICogaSArIDFdID0gYzIgPyB3IDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnX2RpYWxvZy5zZW5kQXVkaW8obDE2KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnX2Zvcm1hdCA9PT0gJ1BDTVUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gZGF0YS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bGF3ID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHNpemU7ICsraSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsYXdbaV0gPSB1bGF3RW5jb2RlU2FtcGxlKGRhdGFbaV0gKiAzMjc2OCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ19kaWFsb2cuc2VuZEF1ZGlvKHVsYXcpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB0byBMaW5lYXItMTYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpemUgPSBkYXRhLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGwxNiA9IG5ldyBJbnQxNkFycmF5KHNpemUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBzaXplOyArK2kpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gZGF0YVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsMTZbaV0gPSAodiA8IC0xLjApID8gLTMyNzY4IDogKCh2ID4gMS4wKSA/IDMyNzY3IDogdiAqIDMyNzY3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnX2RpYWxvZy5zZW5kQXVkaW8obDE2KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHNjcmlwdFByb2Nlc3Nvci5jb25uZWN0KGdfYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTsKICAgICAgICAgICAgbWVkaWFTdHJlYW1Tb3VyY2UgLmNvbm5lY3Qoc2NyaXB0UHJvY2Vzc29yKTsKICAgICAgICAgICAgZ19tZWRpYVRyYWNrID0gc3RyZWFtLmdldFRyYWNrcygpWzBdOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgdHJhY2UoYEVycm9yIGluaXRpYWxpemluZyBhdWRpbyBzdHJlYW06ICR7ZXJyfWApOwogICAgICAgICAgICAkKCcjZXJyb3JNZXNzYWdlJykudGV4dCgnVW5hYmxlIHRvIHN0YXJ0IGF1ZGlvIHN0cmVhbSBmcm9tIG1pY3JvcGhvbmUhJyk7CiAgICAgICAgICAgICQoJyNlcnJvck1lc3NhZ2VDb250YWluZXInKS5zaG93KCk7CiAgICAgICAgfSk7Cn0KCiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHsKICAgIHNpZ25JblVzaW5nSW1wbGljaXRGbG93SWZOZWVkZWQoKTsKICAgIGNvbnN0IHN0YXJ0QnV0dG9uRWwgPSAkKCcjc3RhcnRCdXR0b24nKTsKICAgIHN0YXJ0QnV0dG9uRWwuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTsKCiAgICBpZiAobG9jYXRpb24uaG9zdG5hbWUgIT09ICdsb2NhbGhvc3QnKSB7CiAgICAgICAgJCgnI2xvY2FsaG9zdFBhcmFtZXRlcnMnKS5oaWRlKCk7CiAgICB9CgogICAgcmVmcmVzaE1ydXMoKTsKICAgICQoJyNidXN5SW5kaWNhdG9yJykuaGlkZSgpOwogICAgJCgnI2Vycm9yTWVzc2FnZUNvbnRhaW5lcicpLmhpZGUoKTsKICAgICQoJyNzdGFydE92ZXJCdXR0b24nKS5oaWRlKCk7CiAgICAkKCIjc3VnZ2VzdGlvbnBhbmVsIikuaGlkZSgpOwogICAgJCgiI21vbml0b3JTcmMiKS5oaWRlKCk7CiAgICAkKCIjaW5wdXRUZXh0RmllbGQiKS5oaWRlKCk7CiAgICAkKCIjaW5wdXREdG1mS2V5cGFkIikuaGlkZSgpOwogICAgJCgnI2RpYWxvZ2Zsb3dQYXJhbWV0ZXJzJykuaGlkZSgpOwogICAgJCgnI2RpYWxvZ0VuZ2luZVBhcmFtZXRlcnMnKS5oaWRlKCk7CiAgICBjb252ZXJzYXRpb25Db250YWluZXJEaXYuaGlkZSgpOwoKICAgIC8vIFNldHVwIHNvbWUgZGVmYXVsdCB2YWx1ZXMgaW4gdGhlIFVJLgogICAgJCgnI29yZ2FuaXphdGlvbklkJykudmFsKCc0NGE0ODMxYi0xM2NlLTQzMmQtODFjNS03OTM5NTA1YWE0YWInKTsKICAgICQoJyNib3RJbnRlZ3JhdGlvbklkJykudmFsKCc1NjE2NTUzMC0xNzNlLTQwY2EtYWI4YS05ZjFiOWQyNWJlNWMnKTsKICAgICQoJyNkaWFsb2dmbG93UHJvamVjdElkJykudmFsKCdyZXN0YXVyYW50Ym90LWxpa2d2bicpOwogICAgJCgnI2RpYWxvZ0VuZ2luZUJvdElkJykudmFsKCczYWIyOWZkMi04ZDIzLTQ3MzEtYjk0ZC1lMWFjZmY3YWUzNzUnKTsKICAgICQoJyNkaWFsb2dFbmdpbmVCb3RWZXJzaW9uJykudmFsKCc3OWYyNzM0Mi1jNWYzLTRiMmYtYWUzYi0wMDE0ZTJhNzkyYjInKTsKCiAgICAvLyBJbml0aWFsaXplIGF1ZGlvIHN0cmVhbSB3aXRoIEF1ZGlvQ29udGV4dC4KICAgIGluaXRpYWxpemVBdWRpb1N0cmVhbSgpOwoKICAgIGNvbnN0IGJvdFNlbGVjdG9yID0gJCgnI2JvdFNlbGVjdG9yJykuZW1wdHkoKTsKICAgIGxldCBmaXJzdCA9IHRydWU7CgogICAgZm9yKGNvbnN0IGJvdCBvZiAoZ19ib3RsaXN0LmRpYWxvZ2JvdHMgfHwgW10pKSB7CiAgICAgICAgbGV0IGl0ZW0gPSAkKCc8b3B0aW9uPicsIHt2YWx1ZTogYm90LnByb3ZpZGVyIHx8ICcnLCB0ZXh0OiBib3QubGFiZWwgfHwgJycsICdkYXRhLXByb3ZpZGVyJzogYm90LnByb3ZpZGVyIHx8ICcnfSk7CgogICAgICAgIGlmKGZpcnN0KSB7CiAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7CiAgICAgICAgICAgIGl0ZW0uYXR0cignc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTsKICAgICAgICB9CgogICAgICAgIGJvdFNlbGVjdG9yLmFwcGVuZChpdGVtKTsKICAgIH0KCiAgICByZWZyZXNoVFRTRW5naW5lTGFuZ3VhZ2VNYXBwaW5nKCk7CiAgICAkKCcjdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nU2VsZWN0b3InKS5vbigiY2hhbmdlIiwgdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nU2VsZWN0b3JDaGFuZ2UpOwogICAgJCgnI3Nob3dUVFNFbmdpbmVMYW5ndWFnZU1hcHBpbmcnKS5jbGljaygoKSA9PiB7CiAgICAgICAgY29uc3QgbWFwID0gJCgnI2Rpc3BsYXlUVFNFbmdpbmVMYW5ndWFnZU1hcHBpbmcnKTsKICAgICAgICBtYXAuZW1wdHkoKTsKCiAgICAgICAgbGV0IGZpcnN0ID0gdHJ1ZTsKICAgICAgICBsZXQgaHRtbCA9ICcnOwogICAgICAgIGdfdHRzRW5naW5lTGFuZ3VhZ2VNYXBwaW5nLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgICAgaWYgKCFmaXJzdCkgewogICAgICAgICAgICAgICAgaHRtbCArPSAiPGhyIHN0eWxlPSdjbGVhcjpib3RoOycgLz4iOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7CiAgICAgICAgICAgIGh0bWwgKz0gIjxkaXYgY2xhc3M9J3Jvdyc+IjsKICAgICAgICAgICAgaHRtbCArPSAiPGRpdiBjbGFzcz0nY29sLTExJz4iOwogICAgICAgICAgICBodG1sICs9IGA8aDU+JHtpdGVtLmxhbmd1YWdlfTwvaDU+YDsKICAgICAgICAgICAgaHRtbCArPSBgPGRpdj48Yj5FbmdpbmU6PC9iPiAke2l0ZW0uZW5naW5lSWR9PC9kaXY+YDsKICAgICAgICAgICAgaHRtbCArPSBgPGRpdj48Yj5Wb2ljZTo8L2I+ICR7aXRlbS5kZWZhdWx0Vm9pY2VJZH08L2Rpdj5gOwogICAgICAgICAgICBodG1sICs9ICc8L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwogICAgICAgIH0pCiAgICAgICAgbWFwLmFwcGVuZChodG1sKTsKICAgIH0pCgogICAgaWYgKGdfYm90bGlzdC5hc3Npc3RhbnRzKSB7CiAgICAgICAgc2VsZWN0b3IuYXBwZW5kKCQoJzxvcHRpb24gZGlzYWJsZWQ9ImRpc2FibGVkIj7ilIDilIDilIDilIDilIDilIDilIDilIDilIDilIA8L29wdGlvbj4nKSk7CiAgICB9CgogICAgZm9yKGNvbnN0IGJvdCBvZiAoZ19ib3RsaXN0LmFzc2lzdGFudHMgfHwgW10pKSB7CiAgICAgICAgbGV0IGl0ZW0gPSAkKCc8b3B0aW9uPicsIHt2YWx1ZTogYm90LnByb3ZpZGVyIHx8ICcnLCB0ZXh0OiBib3QubGFiZWwgfHwgJycsICdkYXRhLXByb3ZpZGVyJzogYm90LnByb3ZpZGVyIHx8ICcnfSk7CgogICAgICAgIGlmKGZpcnN0KSB7CiAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7CiAgICAgICAgICAgIGl0ZW0uYXR0cignc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTsKICAgICAgICB9CgogICAgICAgIHNlbGVjdG9yLmFwcGVuZChpdGVtKTsKICAgIH0KCiAgICB1cGRhdGVCb3RQYXJhbWV0ZXJzKCk7CiAgICAkKCcjYm90U2VsZWN0b3InKS5vbigiY2hhbmdlIiwgdXBkYXRlQm90UGFyYW1ldGVycyk7CgogICAgaWYoIWdfYXVkaW9Db250ZXh0IHx8ICFnX3N1cHBvcnRzR2V0VXNlck1lZGlhKSB7CiAgICAgICAgdHJhY2UoIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCAnZ2V0VXNlck1lZGlhJyEiKTsKICAgICAgICAkKCcjZXJyb3JNZXNzYWdlJykudGV4dCgiVGhpcyBCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgJ2dldFVzZXJNZWRpYSchIik7CiAgICAgICAgJCgnI2Vycm9yTWVzc2FnZUNvbnRhaW5lcicpLnNob3coKTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgJCgnI3N0YXJ0T3ZlckJ1dHRvbicpLmNsaWNrKChldmVudCkgPT4gewogICAgICAgIGlmKGdfcGxheWluZ1NvdXJjZSkgewogICAgICAgICAgICBnX3BsYXlpbmdTb3VyY2Uuc3RvcCgpOwogICAgICAgICAgICBnX3BsYXlpbmdTb3VyY2UgPSBudWxsOwoKICAgICAgICAgICAgaWYgKGdfZGlhbG9nKSB7CiAgICAgICAgICAgICAgICBnX2RpYWxvZy5wbGF5YmFja0NvbXBsZXRlKDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZ19kaWFsb2cgIT0gbnVsbCkgewogICAgICAgICAgICBnX2RpYWxvZy5jbG9zZSgpOwogICAgICAgIH0KCiAgICAgICAgcmVmcmVzaE1ydXMoKTsKICAgICAgICBjb252ZXJzYXRpb25Db250YWluZXJEaXYuaGlkZSgpOwogICAgICAgICQoJyNlcnJvck1lc3NhZ2VDb250YWluZXInKS5oaWRlKCk7CiAgICAgICAgJCgnI3N0YXJ0T3ZlckJ1dHRvbicpLmhpZGUoKTsKICAgICAgICAkKCIjc3VnZ2VzdGlvbnBhbmVsIikuaGlkZSgpOwogICAgICAgICQoIiNtb25pdG9yU3JjIikuaGlkZSgpOwogICAgICAgICQoIiNpbnB1dFRleHRGaWVsZCIpLmhpZGUoKTsKICAgICAgICAkKCIjaW5wdXREdG1mS2V5cGFkIikuaGlkZSgpOwogICAgICAgICQoIiNzdGFydENvbmZpZyIpLnNob3coKTsKICAgICAgICBzdGFydEJ1dHRvbkVsLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7CiAgICB9KTsKCiAgICBzdGFydEJ1dHRvbkVsLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7CiAgICBzdGFydEJ1dHRvbkVsLmNsaWNrKGFzeW5jIChldmVudCkgPT4gewogICAgICAgIGlmICghdmFsaWRhdGVGb3JtKCkpIHsgcmV0dXJuOyB9CgogICAgICAgICQoJyNlcnJvck1lc3NhZ2UnKS5odG1sKCcnKTsKICAgICAgICAkKCcjZXJyb3JNZXNzYWdlQ29udGFpbmVyJykuaGlkZSgpOwoKICAgICAgICBjb25zdCBidXN5SW5kaWNhdG9yRWwgPSAkKCcjYnVzeUluZGljYXRvcicpOwoKICAgICAgICBzdGFydEJ1dHRvbkVsLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7CiAgICAgICAgc2F2ZU1ydXMoKTsKICAgICAgICAkKCIjc3RhcnRDb25maWciKS5oaWRlKCk7CiAgICAgICAgYnVzeUluZGljYXRvckVsLnNob3coKTsKCiAgICAgICAgY29uc3QgYm90UGFyYW1ldGVyID0gZ2V0Qm90UGFyYW1ldGVyKCk7CiAgICAgICAgaWYoIWJvdFBhcmFtZXRlcikgewogICAgICAgICAgICB0cmFjZSgiRW1wdHkgYm90IHBhcmFtZXRlcnMiKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBnZXRMUUF1dGhvcml6ZWRVUkwoYm90UGFyYW1ldGVyLmJvdElkLCBib3RQYXJhbWV0ZXIuYm90VmVyc2lvbiwgJCgnI2JvdEludGVncmF0aW9uSWQnKS52YWwoKSkKICAgICAgICAgICAgLnRoZW4oKHVybCkgPT4gewogICAgICAgICAgICAgICAgTG9xdWVudGlhX1VSTCA9IGdldExRRW5kUG9pbnRVUkwodXJsKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBMb3F1ZW50aWFfVVJMOiAke0xvcXVlbnRpYV9VUkx9YCk7CiAgICAgICAgICAgIH0sIChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgdHJhY2UoYEVycm9yIHJldHJpZXZpbmcgdGhlIEpXVDogJHtlcnJvcn1gKTsKICAgICAgICAgICAgICAgICQoJyNlcnJvck1lc3NhZ2UnKS50ZXh0KCdVbmFibGUgdG8gcmV0cmlldmUgdGhlIEpXVCEnKTsKICAgICAgICAgICAgICAgICQoJyNlcnJvck1lc3NhZ2VDb250YWluZXInKS5zaG93KCk7CiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgc3RhcnRTZXNzaW9uKGJvdFBhcmFtZXRlcik7CiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25EaXYuaHRtbCgnJyk7CiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25Db250YWluZXJEaXYuc2hvdygpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAgICAgICBidXN5SW5kaWNhdG9yRWwuaGlkZSgpOwogICAgICAgICAgICAgICAgJCgnI3N0YXJ0T3ZlckJ1dHRvbicpLnNob3coKTsKICAgICAgICAgICAgfSk7CiAgICB9KTsKfSk7Cgo=</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">Ly8K</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">Ly8gSW52b2tlIHRoZSBmdW5jdGlvbiBvbmx5IG9uY2Ugd2hlbiBET00gaXMgcmVhZHkuCg==</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICAgIGxldCBzY3JpcHRQcm9jZXNzb3IgPSBudWxsOwo=</text>
      </register>
      <register name=":" type="4">
        <text>w</text>
      </register>
    </registers>
  </component>
  <component name="VimSearchSettings">
    <search>
      <last-search encoding="base64">XDxjb25zdFw+</last-search>
      <last-offset />
      <last-pattern encoding="base64">XDxjb25zdFw+</last-pattern>
      <last-replace>localhost</last-replace>
      <last-substitute encoding="base64">XDxkZWZhdWx0RXhlY3V0b3JTZXJ2aWNlXD4=</last-substitute>
      <last-dir>-1</last-dir>
      <show-last>false</show-last>
    </search>
  </component>
  <component name="VimSettings">
    <state version="6" enabled="true" />
    <notifications>
      <idea-join enabled="true" />
      <idea-put enabled="false" />
    </notifications>
  </component>
</application>